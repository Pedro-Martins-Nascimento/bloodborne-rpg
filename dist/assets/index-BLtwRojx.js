(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function vo(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ie={},An=[],mt=()=>{},fc=()=>!1,Di=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),bo=t=>t.startsWith("onUpdate:"),Te=Object.assign,Co=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},af=Object.prototype.hasOwnProperty,Z=(t,e)=>af.call(t,e),V=Array.isArray,Nn=t=>ki(t)==="[object Map]",dc=t=>ki(t)==="[object Set]",j=t=>typeof t=="function",me=t=>typeof t=="string",Zt=t=>typeof t=="symbol",he=t=>t!==null&&typeof t=="object",pc=t=>(he(t)||j(t))&&j(t.then)&&j(t.catch),_c=Object.prototype.toString,ki=t=>_c.call(t),cf=t=>ki(t).slice(8,-1),gc=t=>ki(t)==="[object Object]",Eo=t=>me(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,as=vo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mi=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},uf=/-\w/g,Xe=Mi(t=>t.replace(uf,e=>e.slice(1).toUpperCase())),hf=/\B([A-Z])/g,en=Mi(t=>t.replace(hf,"-$1").toLowerCase()),Li=Mi(t=>t.charAt(0).toUpperCase()+t.slice(1)),lr=Mi(t=>t?`on${Li(t)}`:""),Gt=(t,e)=>!Object.is(t,e),ei=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},mc=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},wo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let xl;const Fi=()=>xl||(xl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bi(t){if(V(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=me(s)?_f(s):Bi(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(me(t)||he(t))return t}const ff=/;(?![^(]*\))/g,df=/:([^]+)/,pf=/\/\*[^]*?\*\//g;function _f(t){const e={};return t.replace(pf,"").split(ff).forEach(n=>{if(n){const s=n.split(df);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Rt(t){let e="";if(me(t))e=t;else if(V(t))for(let n=0;n<t.length;n++){const s=Rt(t[n]);s&&(e+=s+" ")}else if(he(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const gf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mf=vo(gf);function yc(t){return!!t||t===""}const vc=t=>!!(t&&t.__v_isRef===!0),We=t=>me(t)?t:t==null?"":V(t)||he(t)&&(t.toString===_c||!j(t.toString))?vc(t)?We(t.value):JSON.stringify(t,bc,2):String(t),bc=(t,e)=>vc(e)?bc(t,e.value):Nn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],r)=>(n[ar(s,r)+" =>"]=i,n),{})}:dc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ar(n))}:Zt(e)?ar(e):he(e)&&!V(e)&&!gc(e)?String(e):e,ar=(t,e="")=>{var n;return Zt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Ue;class yf{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ue,!e&&Ue&&(this.index=(Ue.scopes||(Ue.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ue;try{return Ue=this,e()}finally{Ue=n}}}on(){++this._on===1&&(this.prevScope=Ue,Ue=this)}off(){this._on>0&&--this._on===0&&(Ue=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function vf(){return Ue}let oe;const cr=new WeakSet;class Cc{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ue&&Ue.active&&Ue.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cr.has(this)&&(cr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Rl(this),Sc(this);const e=oe,n=tt;oe=this,tt=!0;try{return this.fn()}finally{Ic(this),oe=e,tt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)To(e);this.deps=this.depsTail=void 0,Rl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mr(this)&&this.run()}get dirty(){return Mr(this)}}let Ec=0,cs,us;function wc(t,e=!1){if(t.flags|=8,e){t.next=us,us=t;return}t.next=cs,cs=t}function So(){Ec++}function Io(){if(--Ec>0)return;if(us){let e=us;for(us=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;cs;){let e=cs;for(cs=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Sc(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ic(t){let e,n=t.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),To(s),bf(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}t.deps=e,t.depsTail=n}function Mr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Tc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Tc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ws)||(t.globalVersion=ws,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Mr(t))))return;t.flags|=2;const e=t.dep,n=oe,s=tt;oe=t,tt=!0;try{Sc(t);const i=t.fn(t._value);(e.version===0||Gt(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{oe=n,tt=s,Ic(t),t.flags&=-3}}function To(t,e=!1){const{dep:n,prevSub:s,nextSub:i}=t;if(s&&(s.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)To(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function bf(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let tt=!0;const xc=[];function Nt(){xc.push(tt),tt=!1}function Pt(){const t=xc.pop();tt=t===void 0?!0:t}function Rl(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=oe;oe=void 0;try{e()}finally{oe=n}}}let ws=0;class Cf{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!oe||!tt||oe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==oe)n=this.activeLink=new Cf(oe,this),oe.deps?(n.prevDep=oe.depsTail,oe.depsTail.nextDep=n,oe.depsTail=n):oe.deps=oe.depsTail=n,Rc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=oe.depsTail,n.nextDep=void 0,oe.depsTail.nextDep=n,oe.depsTail=n,oe.deps===n&&(oe.deps=s)}return n}trigger(e){this.version++,ws++,this.notify(e)}notify(e){So();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Io()}}}function Rc(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Rc(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Lr=new WeakMap,fn=Symbol(""),Fr=Symbol(""),Ss=Symbol("");function Re(t,e,n){if(tt&&oe){let s=Lr.get(t);s||Lr.set(t,s=new Map);let i=s.get(n);i||(s.set(n,i=new xo),i.map=s,i.key=n),i.track()}}function St(t,e,n,s,i,r){const o=Lr.get(t);if(!o){ws++;return}const l=a=>{a&&a.trigger()};if(So(),e==="clear")o.forEach(l);else{const a=V(t),c=a&&Eo(n);if(a&&n==="length"){const u=Number(s);o.forEach((h,f)=>{(f==="length"||f===Ss||!Zt(f)&&f>=u)&&l(h)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),c&&l(o.get(Ss)),e){case"add":a?c&&l(o.get("length")):(l(o.get(fn)),Nn(t)&&l(o.get(Fr)));break;case"delete":a||(l(o.get(fn)),Nn(t)&&l(o.get(Fr)));break;case"set":Nn(t)&&l(o.get(fn));break}}Io()}function wn(t){const e=X(t);return e===t?e:(Re(e,"iterate",Ss),Je(t)?e:e.map(it))}function Hi(t){return Re(t=X(t),"iterate",Ss),t}function Ut(t,e){return Ot(t)?Fn(dn(t)?it(e):e):it(e)}const Ef={__proto__:null,[Symbol.iterator](){return ur(this,Symbol.iterator,t=>Ut(this,t))},concat(...t){return wn(this).concat(...t.map(e=>V(e)?wn(e):e))},entries(){return ur(this,"entries",t=>(t[1]=Ut(this,t[1]),t))},every(t,e){return Ct(this,"every",t,e,void 0,arguments)},filter(t,e){return Ct(this,"filter",t,e,n=>n.map(s=>Ut(this,s)),arguments)},find(t,e){return Ct(this,"find",t,e,n=>Ut(this,n),arguments)},findIndex(t,e){return Ct(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ct(this,"findLast",t,e,n=>Ut(this,n),arguments)},findLastIndex(t,e){return Ct(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ct(this,"forEach",t,e,void 0,arguments)},includes(...t){return hr(this,"includes",t)},indexOf(...t){return hr(this,"indexOf",t)},join(t){return wn(this).join(t)},lastIndexOf(...t){return hr(this,"lastIndexOf",t)},map(t,e){return Ct(this,"map",t,e,void 0,arguments)},pop(){return Zn(this,"pop")},push(...t){return Zn(this,"push",t)},reduce(t,...e){return Al(this,"reduce",t,e)},reduceRight(t,...e){return Al(this,"reduceRight",t,e)},shift(){return Zn(this,"shift")},some(t,e){return Ct(this,"some",t,e,void 0,arguments)},splice(...t){return Zn(this,"splice",t)},toReversed(){return wn(this).toReversed()},toSorted(t){return wn(this).toSorted(t)},toSpliced(...t){return wn(this).toSpliced(...t)},unshift(...t){return Zn(this,"unshift",t)},values(){return ur(this,"values",t=>Ut(this,t))}};function ur(t,e,n){const s=Hi(t),i=s[e]();return s!==t&&!Je(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=n(r.value)),r}),i}const wf=Array.prototype;function Ct(t,e,n,s,i,r){const o=Hi(t),l=o!==t&&!Je(t),a=o[e];if(a!==wf[e]){const h=a.apply(t,r);return l?it(h):h}let c=n;o!==t&&(l?c=function(h,f){return n.call(this,Ut(t,h),f,t)}:n.length>2&&(c=function(h,f){return n.call(this,h,f,t)}));const u=a.call(o,c,s);return l&&i?i(u):u}function Al(t,e,n,s){const i=Hi(t);let r=n;return i!==t&&(Je(t)?n.length>3&&(r=function(o,l,a){return n.call(this,o,l,a,t)}):r=function(o,l,a){return n.call(this,o,Ut(t,l),a,t)}),i[e](r,...s)}function hr(t,e,n){const s=X(t);Re(s,"iterate",Ss);const i=s[e](...n);return(i===-1||i===!1)&&No(n[0])?(n[0]=X(n[0]),s[e](...n)):i}function Zn(t,e,n=[]){Nt(),So();const s=X(t)[e].apply(t,n);return Io(),Pt(),s}const Sf=vo("__proto__,__v_isRef,__isVue"),Ac=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zt));function If(t){Zt(t)||(t=String(t));const e=X(this);return Re(e,"has",t),e.hasOwnProperty(t)}class Nc{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?Mf:kc:r?Dc:Oc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=V(e);if(!i){let a;if(o&&(a=Ef[n]))return a;if(n==="hasOwnProperty")return If}const l=Reflect.get(e,n,Pe(e)?e:s);if((Zt(n)?Ac.has(n):Sf(n))||(i||Re(e,"get",n),r))return l;if(Pe(l)){const a=o&&Eo(n)?l:l.value;return i&&he(a)?Hr(a):a}return he(l)?i?Hr(l):Ui(l):l}}class Pc extends Nc{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];const o=V(e)&&Eo(n);if(!this._isShallow){const c=Ot(r);if(!Je(s)&&!Ot(s)&&(r=X(r),s=X(s)),!o&&Pe(r)&&!Pe(s))return c||(r.value=s),!0}const l=o?Number(n)<e.length:Z(e,n),a=Reflect.set(e,n,s,Pe(e)?e:i);return e===X(i)&&(l?Gt(s,r)&&St(e,"set",n,s):St(e,"add",n,s)),a}deleteProperty(e,n){const s=Z(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&St(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!Zt(n)||!Ac.has(n))&&Re(e,"has",n),s}ownKeys(e){return Re(e,"iterate",V(e)?"length":fn),Reflect.ownKeys(e)}}class Tf extends Nc{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const xf=new Pc,Rf=new Tf,Af=new Pc(!0);const Br=t=>t,Ys=t=>Reflect.getPrototypeOf(t);function Nf(t,e,n){return function(...s){const i=this.__v_raw,r=X(i),o=Nn(r),l=t==="entries"||t===Symbol.iterator&&o,a=t==="keys"&&o,c=i[t](...s),u=n?Br:e?Fn:it;return!e&&Re(r,"iterate",a?Fr:fn),Te(Object.create(c),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:l?[u(h[0]),u(h[1])]:u(h),done:f}}})}}function Qs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Pf(t,e){const n={get(i){const r=this.__v_raw,o=X(r),l=X(i);t||(Gt(i,l)&&Re(o,"get",i),Re(o,"get",l));const{has:a}=Ys(o),c=e?Br:t?Fn:it;if(a.call(o,i))return c(r.get(i));if(a.call(o,l))return c(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&Re(X(i),"iterate",fn),i.size},has(i){const r=this.__v_raw,o=X(r),l=X(i);return t||(Gt(i,l)&&Re(o,"has",i),Re(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=X(l),c=e?Br:t?Fn:it;return!t&&Re(a,"iterate",fn),l.forEach((u,h)=>i.call(r,c(u),c(h),o))}};return Te(n,t?{add:Qs("add"),set:Qs("set"),delete:Qs("delete"),clear:Qs("clear")}:{add(i){!e&&!Je(i)&&!Ot(i)&&(i=X(i));const r=X(this);return Ys(r).has.call(r,i)||(r.add(i),St(r,"add",i,i)),this},set(i,r){!e&&!Je(r)&&!Ot(r)&&(r=X(r));const o=X(this),{has:l,get:a}=Ys(o);let c=l.call(o,i);c||(i=X(i),c=l.call(o,i));const u=a.call(o,i);return o.set(i,r),c?Gt(r,u)&&St(o,"set",i,r):St(o,"add",i,r),this},delete(i){const r=X(this),{has:o,get:l}=Ys(r);let a=o.call(r,i);a||(i=X(i),a=o.call(r,i)),l&&l.call(r,i);const c=r.delete(i);return a&&St(r,"delete",i,void 0),c},clear(){const i=X(this),r=i.size!==0,o=i.clear();return r&&St(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Nf(i,t,e)}),n}function Ro(t,e){const n=Pf(t,e);return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(Z(n,i)&&i in s?n:s,i,r)}const Of={get:Ro(!1,!1)},Df={get:Ro(!1,!0)},kf={get:Ro(!0,!1)};const Oc=new WeakMap,Dc=new WeakMap,kc=new WeakMap,Mf=new WeakMap;function Lf(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ff(t){return t.__v_skip||!Object.isExtensible(t)?0:Lf(cf(t))}function Ui(t){return Ot(t)?t:Ao(t,!1,xf,Of,Oc)}function Mc(t){return Ao(t,!1,Af,Df,Dc)}function Hr(t){return Ao(t,!0,Rf,kf,kc)}function Ao(t,e,n,s,i){if(!he(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=Ff(t);if(r===0)return t;const o=i.get(t);if(o)return o;const l=new Proxy(t,r===2?s:n);return i.set(t,l),l}function dn(t){return Ot(t)?dn(t.__v_raw):!!(t&&t.__v_isReactive)}function Ot(t){return!!(t&&t.__v_isReadonly)}function Je(t){return!!(t&&t.__v_isShallow)}function No(t){return t?!!t.__v_raw:!1}function X(t){const e=t&&t.__v_raw;return e?X(e):t}function Bf(t){return!Z(t,"__v_skip")&&Object.isExtensible(t)&&mc(t,"__v_skip",!0),t}const it=t=>he(t)?Ui(t):t,Fn=t=>he(t)?Hr(t):t;function Pe(t){return t?t.__v_isRef===!0:!1}function Tt(t){return Lc(t,!1)}function Hf(t){return Lc(t,!0)}function Lc(t,e){return Pe(t)?t:new Uf(t,e)}class Uf{constructor(e,n){this.dep=new xo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:X(e),this._value=n?e:it(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Je(e)||Ot(e);e=s?e:X(e),Gt(e,n)&&(this._rawValue=e,this._value=s?e:it(e),this.dep.trigger())}}function qt(t){return Pe(t)?t.value:t}const Wf={get:(t,e,n)=>e==="__v_raw"?t:qt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return Pe(i)&&!Pe(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function Fc(t){return dn(t)?t:new Proxy(t,Wf)}class Vf{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new xo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ws-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&oe!==this)return wc(this,!0),!0}get value(){const e=this.dep.track();return Tc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function jf(t,e,n=!1){let s,i;return j(t)?s=t:(s=t.get,i=t.set),new Vf(s,i,n)}const Js={},li=new WeakMap;let ln;function $f(t,e=!1,n=ln){if(n){let s=li.get(n);s||li.set(n,s=[]),s.push(t)}}function Gf(t,e,n=ie){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=n,c=M=>i?M:Je(M)||i===!1||i===0?It(M,1):It(M);let u,h,f,p,m=!1,y=!1;if(Pe(t)?(h=()=>t.value,m=Je(t)):dn(t)?(h=()=>c(t),m=!0):V(t)?(y=!0,m=t.some(M=>dn(M)||Je(M)),h=()=>t.map(M=>{if(Pe(M))return M.value;if(dn(M))return c(M);if(j(M))return a?a(M,2):M()})):j(t)?e?h=a?()=>a(t,2):t:h=()=>{if(f){Nt();try{f()}finally{Pt()}}const M=ln;ln=u;try{return a?a(t,3,[p]):t(p)}finally{ln=M}}:h=mt,e&&i){const M=h,se=i===!0?1/0:i;h=()=>It(M(),se)}const R=vf(),x=()=>{u.stop(),R&&R.active&&Co(R.effects,u)};if(r&&e){const M=e;e=(...se)=>{M(...se),x()}}let O=y?new Array(t.length).fill(Js):Js;const L=M=>{if(!(!(u.flags&1)||!u.dirty&&!M))if(e){const se=u.run();if(i||m||(y?se.some((Se,de)=>Gt(Se,O[de])):Gt(se,O))){f&&f();const Se=ln;ln=u;try{const de=[se,O===Js?void 0:y&&O[0]===Js?[]:O,p];O=se,a?a(e,3,de):e(...de)}finally{ln=Se}}}else u.run()};return l&&l(L),u=new Cc(h),u.scheduler=o?()=>o(L,!1):L,p=M=>$f(M,!1,u),f=u.onStop=()=>{const M=li.get(u);if(M){if(a)a(M,4);else for(const se of M)se();li.delete(u)}},e?s?L(!0):O=u.run():o?o(L.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function It(t,e=1/0,n){if(e<=0||!he(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Pe(t))It(t.value,e,n);else if(V(t))for(let s=0;s<t.length;s++)It(t[s],e,n);else if(dc(t)||Nn(t))t.forEach(s=>{It(s,e,n)});else if(gc(t)){for(const s in t)It(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&It(t[s],e,n)}return t}function Bs(t,e,n,s){try{return s?t(...s):t()}catch(i){Wi(i,e,n)}}function yt(t,e,n,s){if(j(t)){const i=Bs(t,e,n,s);return i&&pc(i)&&i.catch(r=>{Wi(r,e,n)}),i}if(V(t)){const i=[];for(let r=0;r<t.length;r++)i.push(yt(t[r],e,n,s));return i}}function Wi(t,e,n,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ie;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,a,c)===!1)return}l=l.parent}if(r){Nt(),Bs(r,null,10,[t,a,c]),Pt();return}}qf(t,n,i,s,o)}function qf(t,e,n,s=!0,i=!1){if(i)throw t;console.error(t)}const ke=[];let _t=-1;const Pn=[];let Wt=null,In=0;const Bc=Promise.resolve();let ai=null;function Hc(t){const e=ai||Bc;return t?e.then(this?t.bind(this):t):e}function Kf(t){let e=_t+1,n=ke.length;for(;e<n;){const s=e+n>>>1,i=ke[s],r=Is(i);r<t||r===t&&i.flags&2?e=s+1:n=s}return e}function Po(t){if(!(t.flags&1)){const e=Is(t),n=ke[ke.length-1];!n||!(t.flags&2)&&e>=Is(n)?ke.push(t):ke.splice(Kf(e),0,t),t.flags|=1,Uc()}}function Uc(){ai||(ai=Bc.then(Vc))}function zf(t){V(t)?Pn.push(...t):Wt&&t.id===-1?Wt.splice(In+1,0,t):t.flags&1||(Pn.push(t),t.flags|=1),Uc()}function Nl(t,e,n=_t+1){for(;n<ke.length;n++){const s=ke[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;ke.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Wc(t){if(Pn.length){const e=[...new Set(Pn)].sort((n,s)=>Is(n)-Is(s));if(Pn.length=0,Wt){Wt.push(...e);return}for(Wt=e,In=0;In<Wt.length;In++){const n=Wt[In];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Wt=null,In=0}}const Is=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Vc(t){try{for(_t=0;_t<ke.length;_t++){const e=ke[_t];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Bs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;_t<ke.length;_t++){const e=ke[_t];e&&(e.flags&=-2)}_t=-1,ke.length=0,Wc(),ai=null,(ke.length||Pn.length)&&Vc()}}let qe=null,jc=null;function ci(t){const e=qe;return qe=t,jc=t&&t.type.__scopeId||null,e}function $c(t,e=qe,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&fi(-1);const r=ci(e);let o;try{o=t(...i)}finally{ci(r),s._d&&fi(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ti(t,e){if(qe===null)return t;const n=Gi(qe),s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,l,a=ie]=e[i];r&&(j(r)&&(r={mounted:r,updated:r}),r.deep&&It(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:l,modifiers:a}))}return t}function rn(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[s];a&&(Nt(),yt(a,n,8,[t.el,l,t,e]),Pt())}}function ni(t,e){if(Ne){let n=Ne.provides;const s=Ne.parent&&Ne.parent.provides;s===n&&(n=Ne.provides=Object.create(s)),n[t]=e}}function nt(t,e,n=!1){const s=zd();if(s||On){let i=On?On._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&j(e)?e.call(s&&s.proxy):e}}const Yf=Symbol.for("v-scx"),Qf=()=>nt(Yf);function hs(t,e,n){return Gc(t,e,n)}function Gc(t,e,n=ie){const{immediate:s,deep:i,flush:r,once:o}=n,l=Te({},n),a=e&&s||!e&&r!=="post";let c;if(xs){if(r==="sync"){const p=Qf();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=mt,p.resume=mt,p.pause=mt,p}}const u=Ne;l.call=(p,m,y)=>yt(p,u,m,y);let h=!1;r==="post"?l.scheduler=p=>{Ge(p,u&&u.suspense)}:r!=="sync"&&(h=!0,l.scheduler=(p,m)=>{m?p():Po(p)}),l.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=Gf(t,e,l);return xs&&(c?c.push(f):a&&f()),f}function Jf(t,e,n){const s=this.proxy,i=me(t)?t.includes(".")?qc(s,t):()=>s[t]:t.bind(s,s);let r;j(e)?r=e:(r=e.handler,n=e);const o=Hs(this),l=Gc(i,r.bind(s),n);return o(),l}function qc(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Xf=Symbol("_vte"),Zf=t=>t.__isTeleport,ed=Symbol("_leaveCb");function Oo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Oo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Kc(t,e){return j(t)?Te({name:t.name},e,{setup:t}):t}function zc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ui=new WeakMap;function fs(t,e,n,s,i=!1){if(V(t)){t.forEach((m,y)=>fs(m,e&&(V(e)?e[y]:e),n,s,i));return}if(ds(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&fs(t,e,n,s.component.subTree);return}const r=s.shapeFlag&4?Gi(s.component):s.el,o=i?null:r,{i:l,r:a}=t,c=e&&e.r,u=l.refs===ie?l.refs={}:l.refs,h=l.setupState,f=X(h),p=h===ie?fc:m=>Z(f,m);if(c!=null&&c!==a){if(Pl(e),me(c))u[c]=null,p(c)&&(h[c]=null);else if(Pe(c)){c.value=null;const m=e;m.k&&(u[m.k]=null)}}if(j(a))Bs(a,l,12,[o,u]);else{const m=me(a),y=Pe(a);if(m||y){const R=()=>{if(t.f){const x=m?p(a)?h[a]:u[a]:a.value;if(i)V(x)&&Co(x,r);else if(V(x))x.includes(r)||x.push(r);else if(m)u[a]=[r],p(a)&&(h[a]=u[a]);else{const O=[r];a.value=O,t.k&&(u[t.k]=O)}}else m?(u[a]=o,p(a)&&(h[a]=o)):y&&(a.value=o,t.k&&(u[t.k]=o))};if(o){const x=()=>{R(),ui.delete(t)};x.id=-1,ui.set(t,x),Ge(x,n)}else Pl(t),R()}}}function Pl(t){const e=ui.get(t);e&&(e.flags|=8,ui.delete(t))}Fi().requestIdleCallback;Fi().cancelIdleCallback;const ds=t=>!!t.type.__asyncLoader,Yc=t=>t.type.__isKeepAlive;function td(t,e){Qc(t,"a",e)}function nd(t,e){Qc(t,"da",e)}function Qc(t,e,n=Ne){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Vi(e,s,n),n){let i=n.parent;for(;i&&i.parent;)Yc(i.parent.vnode)&&sd(s,e,n,i),i=i.parent}}function sd(t,e,n,s){const i=Vi(e,t,s,!0);Jc(()=>{Co(s[e],i)},n)}function Vi(t,e,n=Ne,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Nt();const l=Hs(n),a=yt(e,n,t,o);return l(),Pt(),a});return s?i.unshift(r):i.push(r),r}}const Mt=t=>(e,n=Ne)=>{(!xs||t==="sp")&&Vi(t,(...s)=>e(...s),n)},id=Mt("bm"),Do=Mt("m"),rd=Mt("bu"),od=Mt("u"),ld=Mt("bum"),Jc=Mt("um"),ad=Mt("sp"),cd=Mt("rtg"),ud=Mt("rtc");function hd(t,e=Ne){Vi("ec",t,e)}const fd="components";function Xc(t,e){return pd(fd,t,!0,e)||t}const dd=Symbol.for("v-ndc");function pd(t,e,n=!0,s=!1){const i=qe||Ne;if(i){const r=i.type;{const l=Zd(r,!1);if(l&&(l===e||l===Xe(e)||l===Li(Xe(e))))return r}const o=Ol(i[t]||r[t],e)||Ol(i.appContext[t],e);return!o&&s?r:o}}function Ol(t,e){return t&&(t[e]||t[Xe(e)]||t[Li(Xe(e))])}function os(t,e,n,s){let i;const r=n,o=V(t);if(o||me(t)){const l=o&&dn(t);let a=!1,c=!1;l&&(a=!Je(t),c=Ot(t),t=Hi(t)),i=new Array(t.length);for(let u=0,h=t.length;u<h;u++)i[u]=e(a?c?Fn(it(t[u])):it(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){i=new Array(t);for(let l=0;l<t;l++)i[l]=e(l+1,l,void 0,r)}else if(he(t))if(t[Symbol.iterator])i=Array.from(t,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(t);i=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];i[a]=e(t[u],u,a,r)}}else i=[];return i}const Ur=t=>t?vu(t)?Gi(t):Ur(t.parent):null,ps=Te(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ur(t.parent),$root:t=>Ur(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>eu(t),$forceUpdate:t=>t.f||(t.f=()=>{Po(t.update)}),$nextTick:t=>t.n||(t.n=Hc.bind(t.proxy)),$watch:t=>Jf.bind(t)}),fr=(t,e)=>t!==ie&&!t.__isScriptSetup&&Z(t,e),_d={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:a}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(fr(s,e))return o[e]=1,s[e];if(i!==ie&&Z(i,e))return o[e]=2,i[e];if(Z(r,e))return o[e]=3,r[e];if(n!==ie&&Z(n,e))return o[e]=4,n[e];Wr&&(o[e]=0)}}const c=ps[e];let u,h;if(c)return e==="$attrs"&&Re(t.attrs,"get",""),c(t);if((u=l.__cssModules)&&(u=u[e]))return u;if(n!==ie&&Z(n,e))return o[e]=4,n[e];if(h=a.config.globalProperties,Z(h,e))return h[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return fr(i,e)?(i[e]=n,!0):s!==ie&&Z(s,e)?(s[e]=n,!0):Z(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,props:r,type:o}},l){let a;return!!(n[l]||t!==ie&&l[0]!=="$"&&Z(t,l)||fr(e,l)||Z(r,l)||Z(s,l)||Z(ps,l)||Z(i.config.globalProperties,l)||(a=o.__cssModules)&&a[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Z(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Dl(t){return V(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Wr=!0;function gd(t){const e=eu(t),n=t.proxy,s=t.ctx;Wr=!1,e.beforeCreate&&kl(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:p,updated:m,activated:y,deactivated:R,beforeDestroy:x,beforeUnmount:O,destroyed:L,unmounted:M,render:se,renderTracked:Se,renderTriggered:de,errorCaptured:lt,serverPrefetch:Lt,expose:at,inheritAttrs:Ft,components:nn,directives:ct,filters:Jn}=e;if(c&&md(c,s,null),o)for(const te in o){const Q=o[te];j(Q)&&(s[te]=Q.bind(n))}if(i){const te=i.call(n,n);he(te)&&(t.data=Ui(te))}if(Wr=!0,r)for(const te in r){const Q=r[te],bt=j(Q)?Q.bind(n,n):j(Q.get)?Q.get.bind(n,n):mt,Bt=!j(Q)&&j(Q.set)?Q.set.bind(n):mt,ut=Ye({get:bt,set:Bt});Object.defineProperty(s,te,{enumerable:!0,configurable:!0,get:()=>ut.value,set:Fe=>ut.value=Fe})}if(l)for(const te in l)Zc(l[te],s,n,te);if(a){const te=j(a)?a.call(n):a;Reflect.ownKeys(te).forEach(Q=>{ni(Q,te[Q])})}u&&kl(u,t,"c");function ve(te,Q){V(Q)?Q.forEach(bt=>te(bt.bind(n))):Q&&te(Q.bind(n))}if(ve(id,h),ve(Do,f),ve(rd,p),ve(od,m),ve(td,y),ve(nd,R),ve(hd,lt),ve(ud,Se),ve(cd,de),ve(ld,O),ve(Jc,M),ve(ad,Lt),V(at))if(at.length){const te=t.exposed||(t.exposed={});at.forEach(Q=>{Object.defineProperty(te,Q,{get:()=>n[Q],set:bt=>n[Q]=bt,enumerable:!0})})}else t.exposed||(t.exposed={});se&&t.render===mt&&(t.render=se),Ft!=null&&(t.inheritAttrs=Ft),nn&&(t.components=nn),ct&&(t.directives=ct),Lt&&zc(t)}function md(t,e,n=mt){V(t)&&(t=Vr(t));for(const s in t){const i=t[s];let r;he(i)?"default"in i?r=nt(i.from||s,i.default,!0):r=nt(i.from||s):r=nt(i),Pe(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function kl(t,e,n){yt(V(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Zc(t,e,n,s){let i=s.includes(".")?qc(n,s):()=>n[s];if(me(t)){const r=e[t];j(r)&&hs(i,r)}else if(j(t))hs(i,t.bind(n));else if(he(t))if(V(t))t.forEach(r=>Zc(r,e,n,s));else{const r=j(t.handler)?t.handler.bind(n):e[t.handler];j(r)&&hs(i,r,t)}}function eu(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,l=r.get(e);let a;return l?a=l:!i.length&&!n&&!s?a=e:(a={},i.length&&i.forEach(c=>hi(a,c,o,!0)),hi(a,e,o)),he(e)&&r.set(e,a),a}function hi(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&hi(t,r,n,!0),i&&i.forEach(o=>hi(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=yd[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const yd={data:Ml,props:Ll,emits:Ll,methods:ls,computed:ls,beforeCreate:Oe,created:Oe,beforeMount:Oe,mounted:Oe,beforeUpdate:Oe,updated:Oe,beforeDestroy:Oe,beforeUnmount:Oe,destroyed:Oe,unmounted:Oe,activated:Oe,deactivated:Oe,errorCaptured:Oe,serverPrefetch:Oe,components:ls,directives:ls,watch:bd,provide:Ml,inject:vd};function Ml(t,e){return e?t?function(){return Te(j(t)?t.call(this,this):t,j(e)?e.call(this,this):e)}:e:t}function vd(t,e){return ls(Vr(t),Vr(e))}function Vr(t){if(V(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Oe(t,e){return t?[...new Set([].concat(t,e))]:e}function ls(t,e){return t?Te(Object.create(null),t,e):e}function Ll(t,e){return t?V(t)&&V(e)?[...new Set([...t,...e])]:Te(Object.create(null),Dl(t),Dl(e??{})):e}function bd(t,e){if(!t)return e;if(!e)return t;const n=Te(Object.create(null),t);for(const s in e)n[s]=Oe(t[s],e[s]);return n}function tu(){return{app:null,config:{isNativeTag:fc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Cd=0;function Ed(t,e){return function(s,i=null){j(s)||(s=Te({},s)),i!=null&&!he(i)&&(i=null);const r=tu(),o=new WeakSet,l=[];let a=!1;const c=r.app={_uid:Cd++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:tp,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&j(u.install)?(o.add(u),u.install(c,...h)):j(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,f){if(!a){const p=c._ceVNode||Me(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),t(p,u,f),a=!0,c._container=u,u.__vue_app__=c,Gi(p.component)}},onUnmount(u){l.push(u)},unmount(){a&&(yt(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=On;On=c;try{return u()}finally{On=h}}};return c}}let On=null;const wd=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xe(e)}Modifiers`]||t[`${en(e)}Modifiers`];function Sd(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ie;let i=n;const r=e.startsWith("update:"),o=r&&wd(s,e.slice(7));o&&(o.trim&&(i=n.map(u=>me(u)?u.trim():u)),o.number&&(i=n.map(wo)));let l,a=s[l=lr(e)]||s[l=lr(Xe(e))];!a&&r&&(a=s[l=lr(en(e))]),a&&yt(a,t,6,i);const c=s[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,yt(c,t,6,i)}}const Id=new WeakMap;function nu(t,e,n=!1){const s=n?Id:e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},l=!1;if(!j(t)){const a=c=>{const u=nu(c,e,!0);u&&(l=!0,Te(o,u))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!r&&!l?(he(t)&&s.set(t,null),null):(V(r)?r.forEach(a=>o[a]=null):Te(o,r),he(t)&&s.set(t,o),o)}function ji(t,e){return!t||!Di(e)?!1:(e=e.slice(2).replace(/Once$/,""),Z(t,e[0].toLowerCase()+e.slice(1))||Z(t,en(e))||Z(t,e))}function Fl(t){const{type:e,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:c,renderCache:u,props:h,data:f,setupState:p,ctx:m,inheritAttrs:y}=t,R=ci(t);let x,O;try{if(n.shapeFlag&4){const M=i||s,se=M;x=gt(c.call(se,M,u,h,p,f,m)),O=l}else{const M=e;x=gt(M.length>1?M(h,{attrs:l,slots:o,emit:a}):M(h,null)),O=e.props?l:Td(l)}}catch(M){_s.length=0,Wi(M,t,1),x=Me(Qt)}let L=x;if(O&&y!==!1){const M=Object.keys(O),{shapeFlag:se}=L;M.length&&se&7&&(r&&M.some(bo)&&(O=xd(O,r)),L=Bn(L,O,!1,!0))}return n.dirs&&(L=Bn(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&Oo(L,n.transition),x=L,ci(R),x}const Td=t=>{let e;for(const n in t)(n==="class"||n==="style"||Di(n))&&((e||(e={}))[n]=t[n]);return e},xd=(t,e)=>{const n={};for(const s in t)(!bo(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Rd(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:l,patchFlag:a}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?Bl(s,o,c):!!o;if(a&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==s[f]&&!ji(c,f))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Bl(s,o,c):!0:!!o;return!1}function Bl(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!ji(n,r))return!0}return!1}function Ad({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const su={},iu=()=>Object.create(su),ru=t=>Object.getPrototypeOf(t)===su;function Nd(t,e,n,s=!1){const i={},r=iu();t.propsDefaults=Object.create(null),ou(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:Mc(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function Pd(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,l=X(i),[a]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(ji(t.emitsOptions,f))continue;const p=e[f];if(a)if(Z(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const m=Xe(f);i[m]=jr(a,l,m,p,t,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{ou(t,e,i,r)&&(c=!0);let u;for(const h in l)(!e||!Z(e,h)&&((u=en(h))===h||!Z(e,u)))&&(a?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=jr(a,l,h,void 0,t,!0)):delete i[h]);if(r!==l)for(const h in r)(!e||!Z(e,h))&&(delete r[h],c=!0)}c&&St(t.attrs,"set","")}function ou(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,l;if(e)for(let a in e){if(as(a))continue;const c=e[a];let u;i&&Z(i,u=Xe(a))?!r||!r.includes(u)?n[u]=c:(l||(l={}))[u]=c:ji(t.emitsOptions,a)||(!(a in s)||c!==s[a])&&(s[a]=c,o=!0)}if(r){const a=X(n),c=l||ie;for(let u=0;u<r.length;u++){const h=r[u];n[h]=jr(i,a,h,c[h],t,!Z(c,h))}}return o}function jr(t,e,n,s,i,r){const o=t[n];if(o!=null){const l=Z(o,"default");if(l&&s===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&j(a)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=Hs(i);s=c[n]=a.call(null,e),u()}}else s=a;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===en(n))&&(s=!0))}return s}const Od=new WeakMap;function lu(t,e,n=!1){const s=n?Od:e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},l=[];let a=!1;if(!j(t)){const u=h=>{a=!0;const[f,p]=lu(h,e,!0);Te(o,f),p&&l.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!a)return he(t)&&s.set(t,An),An;if(V(r))for(let u=0;u<r.length;u++){const h=Xe(r[u]);Hl(h)&&(o[h]=ie)}else if(r)for(const u in r){const h=Xe(u);if(Hl(h)){const f=r[u],p=o[h]=V(f)||j(f)?{type:f}:Te({},f),m=p.type;let y=!1,R=!0;if(V(m))for(let x=0;x<m.length;++x){const O=m[x],L=j(O)&&O.name;if(L==="Boolean"){y=!0;break}else L==="String"&&(R=!1)}else y=j(m)&&m.name==="Boolean";p[0]=y,p[1]=R,(y||Z(p,"default"))&&l.push(h)}}const c=[o,l];return he(t)&&s.set(t,c),c}function Hl(t){return t[0]!=="$"&&!as(t)}const ko=t=>t==="_"||t==="_ctx"||t==="$stable",Mo=t=>V(t)?t.map(gt):[gt(t)],Dd=(t,e,n)=>{if(e._n)return e;const s=$c((...i)=>Mo(e(...i)),n);return s._c=!1,s},au=(t,e,n)=>{const s=t._ctx;for(const i in t){if(ko(i))continue;const r=t[i];if(j(r))e[i]=Dd(i,r,s);else if(r!=null){const o=Mo(r);e[i]=()=>o}}},cu=(t,e)=>{const n=Mo(e);t.slots.default=()=>n},uu=(t,e,n)=>{for(const s in e)(n||!ko(s))&&(t[s]=e[s])},kd=(t,e,n)=>{const s=t.slots=iu();if(t.vnode.shapeFlag&32){const i=e._;i?(uu(s,e,n),n&&mc(s,"_",i,!0)):au(e,s)}else e&&cu(t,e)},Md=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=ie;if(s.shapeFlag&32){const l=e._;l?n&&l===1?r=!1:uu(i,e,n):(r=!e.$stable,au(e,i)),o=e}else e&&(cu(t,e),o={default:1});if(r)for(const l in i)!ko(l)&&o[l]==null&&delete i[l]},Ge=Ud;function Ld(t){return Fd(t)}function Fd(t,e){const n=Fi();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:p=mt,insertStaticContent:m}=t,y=(d,_,g,v=null,E=null,b=null,A=void 0,T=null,I=!!_.dynamicChildren)=>{if(d===_)return;d&&!es(d,_)&&(v=C(d),Fe(d,E,b,!0),d=null),_.patchFlag===-2&&(I=!1,_.dynamicChildren=null);const{type:w,ref:H,shapeFlag:P}=_;switch(w){case $i:R(d,_,g,v);break;case Qt:x(d,_,g,v);break;case pr:d==null&&O(_,g,v,A);break;case Ae:nn(d,_,g,v,E,b,A,T,I);break;default:P&1?se(d,_,g,v,E,b,A,T,I):P&6?ct(d,_,g,v,E,b,A,T,I):(P&64||P&128)&&w.process(d,_,g,v,E,b,A,T,I,F)}H!=null&&E?fs(H,d&&d.ref,b,_||d,!_):H==null&&d&&d.ref!=null&&fs(d.ref,null,b,d,!0)},R=(d,_,g,v)=>{if(d==null)s(_.el=l(_.children),g,v);else{const E=_.el=d.el;_.children!==d.children&&c(E,_.children)}},x=(d,_,g,v)=>{d==null?s(_.el=a(_.children||""),g,v):_.el=d.el},O=(d,_,g,v)=>{[d.el,d.anchor]=m(d.children,_,g,v,d.el,d.anchor)},L=({el:d,anchor:_},g,v)=>{let E;for(;d&&d!==_;)E=f(d),s(d,g,v),d=E;s(_,g,v)},M=({el:d,anchor:_})=>{let g;for(;d&&d!==_;)g=f(d),i(d),d=g;i(_)},se=(d,_,g,v,E,b,A,T,I)=>{if(_.type==="svg"?A="svg":_.type==="math"&&(A="mathml"),d==null)Se(_,g,v,E,b,A,T,I);else{const w=d.el&&d.el._isVueCE?d.el:null;try{w&&w._beginPatch(),Lt(d,_,E,b,A,T,I)}finally{w&&w._endPatch()}}},Se=(d,_,g,v,E,b,A,T)=>{let I,w;const{props:H,shapeFlag:P,transition:B,dirs:W}=d;if(I=d.el=o(d.type,b,H&&H.is,H),P&8?u(I,d.children):P&16&&lt(d.children,I,null,v,E,dr(d,b),A,T),W&&rn(d,null,v,"created"),de(I,d,d.scopeId,A,v),H){for(const re in H)re!=="value"&&!as(re)&&r(I,re,null,H[re],b,v);"value"in H&&r(I,"value",null,H.value,b),(w=H.onVnodeBeforeMount)&&pt(w,v,d)}W&&rn(d,null,v,"beforeMount");const z=Bd(E,B);z&&B.beforeEnter(I),s(I,_,g),((w=H&&H.onVnodeMounted)||z||W)&&Ge(()=>{w&&pt(w,v,d),z&&B.enter(I),W&&rn(d,null,v,"mounted")},E)},de=(d,_,g,v,E)=>{if(g&&p(d,g),v)for(let b=0;b<v.length;b++)p(d,v[b]);if(E){let b=E.subTree;if(_===b||pu(b.type)&&(b.ssContent===_||b.ssFallback===_)){const A=E.vnode;de(d,A,A.scopeId,A.slotScopeIds,E.parent)}}},lt=(d,_,g,v,E,b,A,T,I=0)=>{for(let w=I;w<d.length;w++){const H=d[w]=T?Vt(d[w]):gt(d[w]);y(null,H,_,g,v,E,b,A,T)}},Lt=(d,_,g,v,E,b,A)=>{const T=_.el=d.el;let{patchFlag:I,dynamicChildren:w,dirs:H}=_;I|=d.patchFlag&16;const P=d.props||ie,B=_.props||ie;let W;if(g&&on(g,!1),(W=B.onVnodeBeforeUpdate)&&pt(W,g,_,d),H&&rn(_,d,g,"beforeUpdate"),g&&on(g,!0),(P.innerHTML&&B.innerHTML==null||P.textContent&&B.textContent==null)&&u(T,""),w?at(d.dynamicChildren,w,T,g,v,dr(_,E),b):A||Q(d,_,T,null,g,v,dr(_,E),b,!1),I>0){if(I&16)Ft(T,P,B,g,E);else if(I&2&&P.class!==B.class&&r(T,"class",null,B.class,E),I&4&&r(T,"style",P.style,B.style,E),I&8){const z=_.dynamicProps;for(let re=0;re<z.length;re++){const ee=z[re],Be=P[ee],He=B[ee];(He!==Be||ee==="value")&&r(T,ee,Be,He,E,g)}}I&1&&d.children!==_.children&&u(T,_.children)}else!A&&w==null&&Ft(T,P,B,g,E);((W=B.onVnodeUpdated)||H)&&Ge(()=>{W&&pt(W,g,_,d),H&&rn(_,d,g,"updated")},v)},at=(d,_,g,v,E,b,A)=>{for(let T=0;T<_.length;T++){const I=d[T],w=_[T],H=I.el&&(I.type===Ae||!es(I,w)||I.shapeFlag&198)?h(I.el):g;y(I,w,H,null,v,E,b,A,!0)}},Ft=(d,_,g,v,E)=>{if(_!==g){if(_!==ie)for(const b in _)!as(b)&&!(b in g)&&r(d,b,_[b],null,E,v);for(const b in g){if(as(b))continue;const A=g[b],T=_[b];A!==T&&b!=="value"&&r(d,b,T,A,E,v)}"value"in g&&r(d,"value",_.value,g.value,E)}},nn=(d,_,g,v,E,b,A,T,I)=>{const w=_.el=d?d.el:l(""),H=_.anchor=d?d.anchor:l("");let{patchFlag:P,dynamicChildren:B,slotScopeIds:W}=_;W&&(T=T?T.concat(W):W),d==null?(s(w,g,v),s(H,g,v),lt(_.children||[],g,H,E,b,A,T,I)):P>0&&P&64&&B&&d.dynamicChildren&&d.dynamicChildren.length===B.length?(at(d.dynamicChildren,B,g,E,b,A,T),(_.key!=null||E&&_===E.subTree)&&hu(d,_,!0)):Q(d,_,g,H,E,b,A,T,I)},ct=(d,_,g,v,E,b,A,T,I)=>{_.slotScopeIds=T,d==null?_.shapeFlag&512?E.ctx.activate(_,g,v,A,I):Jn(_,g,v,E,b,A,I):bn(d,_,I)},Jn=(d,_,g,v,E,b,A)=>{const T=d.component=Kd(d,v,E);if(Yc(d)&&(T.ctx.renderer=F),Yd(T,!1,A),T.asyncDep){if(E&&E.registerDep(T,ve,A),!d.el){const I=T.subTree=Me(Qt);x(null,I,_,g),d.placeholder=I.el}}else ve(T,d,_,g,E,b,A)},bn=(d,_,g)=>{const v=_.component=d.component;if(Rd(d,_,g))if(v.asyncDep&&!v.asyncResolved){te(v,_,g);return}else v.next=_,v.update();else _.el=d.el,v.vnode=_},ve=(d,_,g,v,E,b,A)=>{const T=()=>{if(d.isMounted){let{next:P,bu:B,u:W,parent:z,vnode:re}=d;{const ft=fu(d);if(ft){P&&(P.el=re.el,te(d,P,A)),ft.asyncDep.then(()=>{d.isUnmounted||T()});return}}let ee=P,Be;on(d,!1),P?(P.el=re.el,te(d,P,A)):P=re,B&&ei(B),(Be=P.props&&P.props.onVnodeBeforeUpdate)&&pt(Be,z,P,re),on(d,!0);const He=Fl(d),ht=d.subTree;d.subTree=He,y(ht,He,h(ht.el),C(ht),d,E,b),P.el=He.el,ee===null&&Ad(d,He.el),W&&Ge(W,E),(Be=P.props&&P.props.onVnodeUpdated)&&Ge(()=>pt(Be,z,P,re),E)}else{let P;const{el:B,props:W}=_,{bm:z,m:re,parent:ee,root:Be,type:He}=d,ht=ds(_);on(d,!1),z&&ei(z),!ht&&(P=W&&W.onVnodeBeforeMount)&&pt(P,ee,_),on(d,!0);{Be.ce&&Be.ce._def.shadowRoot!==!1&&Be.ce._injectChildStyle(He);const ft=d.subTree=Fl(d);y(null,ft,g,v,d,E,b),_.el=ft.el}if(re&&Ge(re,E),!ht&&(P=W&&W.onVnodeMounted)){const ft=_;Ge(()=>pt(P,ee,ft),E)}(_.shapeFlag&256||ee&&ds(ee.vnode)&&ee.vnode.shapeFlag&256)&&d.a&&Ge(d.a,E),d.isMounted=!0,_=g=v=null}};d.scope.on();const I=d.effect=new Cc(T);d.scope.off();const w=d.update=I.run.bind(I),H=d.job=I.runIfDirty.bind(I);H.i=d,H.id=d.uid,I.scheduler=()=>Po(H),on(d,!0),w()},te=(d,_,g)=>{_.component=d;const v=d.vnode.props;d.vnode=_,d.next=null,Pd(d,_.props,v,g),Md(d,_.children,g),Nt(),Nl(d),Pt()},Q=(d,_,g,v,E,b,A,T,I=!1)=>{const w=d&&d.children,H=d?d.shapeFlag:0,P=_.children,{patchFlag:B,shapeFlag:W}=_;if(B>0){if(B&128){Bt(w,P,g,v,E,b,A,T,I);return}else if(B&256){bt(w,P,g,v,E,b,A,T,I);return}}W&8?(H&16&&ze(w,E,b),P!==w&&u(g,P)):H&16?W&16?Bt(w,P,g,v,E,b,A,T,I):ze(w,E,b,!0):(H&8&&u(g,""),W&16&&lt(P,g,v,E,b,A,T,I))},bt=(d,_,g,v,E,b,A,T,I)=>{d=d||An,_=_||An;const w=d.length,H=_.length,P=Math.min(w,H);let B;for(B=0;B<P;B++){const W=_[B]=I?Vt(_[B]):gt(_[B]);y(d[B],W,g,null,E,b,A,T,I)}w>H?ze(d,E,b,!0,!1,P):lt(_,g,v,E,b,A,T,I,P)},Bt=(d,_,g,v,E,b,A,T,I)=>{let w=0;const H=_.length;let P=d.length-1,B=H-1;for(;w<=P&&w<=B;){const W=d[w],z=_[w]=I?Vt(_[w]):gt(_[w]);if(es(W,z))y(W,z,g,null,E,b,A,T,I);else break;w++}for(;w<=P&&w<=B;){const W=d[P],z=_[B]=I?Vt(_[B]):gt(_[B]);if(es(W,z))y(W,z,g,null,E,b,A,T,I);else break;P--,B--}if(w>P){if(w<=B){const W=B+1,z=W<H?_[W].el:v;for(;w<=B;)y(null,_[w]=I?Vt(_[w]):gt(_[w]),g,z,E,b,A,T,I),w++}}else if(w>B)for(;w<=P;)Fe(d[w],E,b,!0),w++;else{const W=w,z=w,re=new Map;for(w=z;w<=B;w++){const $e=_[w]=I?Vt(_[w]):gt(_[w]);$e.key!=null&&re.set($e.key,w)}let ee,Be=0;const He=B-z+1;let ht=!1,ft=0;const Xn=new Array(He);for(w=0;w<He;w++)Xn[w]=0;for(w=W;w<=P;w++){const $e=d[w];if(Be>=He){Fe($e,E,b,!0);continue}let dt;if($e.key!=null)dt=re.get($e.key);else for(ee=z;ee<=B;ee++)if(Xn[ee-z]===0&&es($e,_[ee])){dt=ee;break}dt===void 0?Fe($e,E,b,!0):(Xn[dt-z]=w+1,dt>=ft?ft=dt:ht=!0,y($e,_[dt],g,null,E,b,A,T,I),Be++)}const Sl=ht?Hd(Xn):An;for(ee=Sl.length-1,w=He-1;w>=0;w--){const $e=z+w,dt=_[$e],Il=_[$e+1],Tl=$e+1<H?Il.el||du(Il):v;Xn[w]===0?y(null,dt,g,Tl,E,b,A,T,I):ht&&(ee<0||w!==Sl[ee]?ut(dt,g,Tl,2):ee--)}}},ut=(d,_,g,v,E=null)=>{const{el:b,type:A,transition:T,children:I,shapeFlag:w}=d;if(w&6){ut(d.component.subTree,_,g,v);return}if(w&128){d.suspense.move(_,g,v);return}if(w&64){A.move(d,_,g,F);return}if(A===Ae){s(b,_,g);for(let P=0;P<I.length;P++)ut(I[P],_,g,v);s(d.anchor,_,g);return}if(A===pr){L(d,_,g);return}if(v!==2&&w&1&&T)if(v===0)T.beforeEnter(b),s(b,_,g),Ge(()=>T.enter(b),E);else{const{leave:P,delayLeave:B,afterLeave:W}=T,z=()=>{d.ctx.isUnmounted?i(b):s(b,_,g)},re=()=>{b._isLeaving&&b[ed](!0),P(b,()=>{z(),W&&W()})};B?B(b,z,re):re()}else s(b,_,g)},Fe=(d,_,g,v=!1,E=!1)=>{const{type:b,props:A,ref:T,children:I,dynamicChildren:w,shapeFlag:H,patchFlag:P,dirs:B,cacheIndex:W}=d;if(P===-2&&(E=!1),T!=null&&(Nt(),fs(T,null,g,d,!0),Pt()),W!=null&&(_.renderCache[W]=void 0),H&256){_.ctx.deactivate(d);return}const z=H&1&&B,re=!ds(d);let ee;if(re&&(ee=A&&A.onVnodeBeforeUnmount)&&pt(ee,_,d),H&6)sn(d.component,g,v);else{if(H&128){d.suspense.unmount(g,v);return}z&&rn(d,null,_,"beforeUnmount"),H&64?d.type.remove(d,_,g,F,v):w&&!w.hasOnce&&(b!==Ae||P>0&&P&64)?ze(w,_,g,!1,!0):(b===Ae&&P&384||!E&&H&16)&&ze(I,_,g),v&&Cn(d)}(re&&(ee=A&&A.onVnodeUnmounted)||z)&&Ge(()=>{ee&&pt(ee,_,d),z&&rn(d,null,_,"unmounted")},g)},Cn=d=>{const{type:_,el:g,anchor:v,transition:E}=d;if(_===Ae){En(g,v);return}if(_===pr){M(d);return}const b=()=>{i(g),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(d.shapeFlag&1&&E&&!E.persisted){const{leave:A,delayLeave:T}=E,I=()=>A(g,b);T?T(d.el,b,I):I()}else b()},En=(d,_)=>{let g;for(;d!==_;)g=f(d),i(d),d=g;i(_)},sn=(d,_,g)=>{const{bum:v,scope:E,job:b,subTree:A,um:T,m:I,a:w}=d;Ul(I),Ul(w),v&&ei(v),E.stop(),b&&(b.flags|=8,Fe(A,d,_,g)),T&&Ge(T,_),Ge(()=>{d.isUnmounted=!0},_)},ze=(d,_,g,v=!1,E=!1,b=0)=>{for(let A=b;A<d.length;A++)Fe(d[A],_,g,v,E)},C=d=>{if(d.shapeFlag&6)return C(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const _=f(d.anchor||d.el),g=_&&_[Xf];return g?f(g):_};let k=!1;const N=(d,_,g)=>{let v;d==null?_._vnode&&(Fe(_._vnode,null,null,!0),v=_._vnode.component):y(_._vnode||null,d,_,null,null,null,g),_._vnode=d,k||(k=!0,Nl(v),Wc(),k=!1)},F={p:y,um:Fe,m:ut,r:Cn,mt:Jn,mc:lt,pc:Q,pbc:at,n:C,o:t};return{render:N,hydrate:void 0,createApp:Ed(N)}}function dr({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function on({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Bd(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function hu(t,e,n=!1){const s=t.children,i=e.children;if(V(s)&&V(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=Vt(i[r]),l.el=o.el),!n&&l.patchFlag!==-2&&hu(o,l)),l.type===$i&&(l.patchFlag!==-1?l.el=o.el:l.__elIndex=r+(t.type===Ae?1:0)),l.type===Qt&&!l.el&&(l.el=o.el)}}function Hd(t){const e=t.slice(),n=[0];let s,i,r,o,l;const a=t.length;for(s=0;s<a;s++){const c=t[s];if(c!==0){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,t[n[l]]<c?r=l+1:o=l;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function fu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fu(e)}function Ul(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function du(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?du(e.subTree):null}const pu=t=>t.__isSuspense;function Ud(t,e){e&&e.pendingBranch?V(t)?e.effects.push(...t):e.effects.push(t):zf(t)}const Ae=Symbol.for("v-fgt"),$i=Symbol.for("v-txt"),Qt=Symbol.for("v-cmt"),pr=Symbol.for("v-stc"),_s=[];let Ke=null;function le(t=!1){_s.push(Ke=t?null:[])}function Wd(){_s.pop(),Ke=_s[_s.length-1]||null}let Ts=1;function fi(t,e=!1){Ts+=t,t<0&&Ke&&e&&(Ke.hasOnce=!0)}function _u(t){return t.dynamicChildren=Ts>0?Ke||An:null,Wd(),Ts>0&&Ke&&Ke.push(t),t}function fe(t,e,n,s,i,r){return _u(D(t,e,n,s,i,r,!0))}function gu(t,e,n,s,i){return _u(Me(t,e,n,s,i,!0))}function di(t){return t?t.__v_isVNode===!0:!1}function es(t,e){return t.type===e.type&&t.key===e.key}const mu=({key:t})=>t??null,si=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?me(t)||Pe(t)||j(t)?{i:qe,r:t,k:e,f:!!n}:t:null);function D(t,e=null,n=null,s=0,i=null,r=t===Ae?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&mu(e),ref:e&&si(e),scopeId:jc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:qe};return l?(Lo(a,n),r&128&&t.normalize(a)):n&&(a.shapeFlag|=me(n)?8:16),Ts>0&&!o&&Ke&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Ke.push(a),a}const Me=Vd;function Vd(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===dd)&&(t=Qt),di(t)){const l=Bn(t,e,!0);return n&&Lo(l,n),Ts>0&&!r&&Ke&&(l.shapeFlag&6?Ke[Ke.indexOf(t)]=l:Ke.push(l)),l.patchFlag=-2,l}if(ep(t)&&(t=t.__vccOpts),e){e=jd(e);let{class:l,style:a}=e;l&&!me(l)&&(e.class=Rt(l)),he(a)&&(No(a)&&!V(a)&&(a=Te({},a)),e.style=Bi(a))}const o=me(t)?1:pu(t)?128:Zf(t)?64:he(t)?4:j(t)?2:0;return D(t,e,n,s,i,o,r,!0)}function jd(t){return t?No(t)||ru(t)?Te({},t):t:null}function Bn(t,e,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=t,c=e?$d(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&mu(c),ref:e&&e.ref?n&&r?V(r)?r.concat(si(e)):[r,si(e)]:si(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ae?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Bn(t.ssContent),ssFallback:t.ssFallback&&Bn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&s&&Oo(u,a.clone(u)),u}function yu(t=" ",e=0){return Me($i,null,t,e)}function $r(t="",e=!1){return e?(le(),gu(Qt,null,t)):Me(Qt,null,t)}function gt(t){return t==null||typeof t=="boolean"?Me(Qt):V(t)?Me(Ae,null,t.slice()):di(t)?Vt(t):Me($i,null,String(t))}function Vt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Bn(t)}function Lo(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(V(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Lo(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!ru(e)?e._ctx=qe:i===3&&qe&&(qe.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else j(e)?(e={default:e,_ctx:qe},n=32):(e=String(e),s&64?(n=16,e=[yu(e)]):n=8);t.children=e,t.shapeFlag|=n}function $d(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=Rt([e.class,s.class]));else if(i==="style")e.style=Bi([e.style,s.style]);else if(Di(i)){const r=e[i],o=s[i];o&&r!==o&&!(V(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function pt(t,e,n,s=null){yt(t,e,7,[n,s])}const Gd=tu();let qd=0;function Kd(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||Gd,r={uid:qd++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new yf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lu(s,i),emitsOptions:nu(s,i),emit:null,emitted:null,propsDefaults:ie,inheritAttrs:s.inheritAttrs,ctx:ie,data:ie,props:ie,attrs:ie,slots:ie,refs:ie,setupState:ie,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Sd.bind(null,r),t.ce&&t.ce(r),r}let Ne=null;const zd=()=>Ne||qe;let pi,Gr;{const t=Fi(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};pi=e("__VUE_INSTANCE_SETTERS__",n=>Ne=n),Gr=e("__VUE_SSR_SETTERS__",n=>xs=n)}const Hs=t=>{const e=Ne;return pi(t),t.scope.on(),()=>{t.scope.off(),pi(e)}},Wl=()=>{Ne&&Ne.scope.off(),pi(null)};function vu(t){return t.vnode.shapeFlag&4}let xs=!1;function Yd(t,e=!1,n=!1){e&&Gr(e);const{props:s,children:i}=t.vnode,r=vu(t);Nd(t,s,r,e),kd(t,i,n||e);const o=r?Qd(t,e):void 0;return e&&Gr(!1),o}function Qd(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,_d);const{setup:s}=n;if(s){Nt();const i=t.setupContext=s.length>1?Xd(t):null,r=Hs(t),o=Bs(s,t,0,[t.props,i]),l=pc(o);if(Pt(),r(),(l||t.sp)&&!ds(t)&&zc(t),l){if(o.then(Wl,Wl),e)return o.then(a=>{Vl(t,a)}).catch(a=>{Wi(a,t,0)});t.asyncDep=o}else Vl(t,o)}else bu(t)}function Vl(t,e,n){j(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:he(e)&&(t.setupState=Fc(e)),bu(t)}function bu(t,e,n){const s=t.type;t.render||(t.render=s.render||mt);{const i=Hs(t);Nt();try{gd(t)}finally{Pt(),i()}}}const Jd={get(t,e){return Re(t,"get",""),t[e]}};function Xd(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Jd),slots:t.slots,emit:t.emit,expose:e}}function Gi(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Fc(Bf(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ps)return ps[n](t)},has(e,n){return n in e||n in ps}})):t.proxy}function Zd(t,e=!0){return j(t)?t.displayName||t.name:t.name||e&&t.__name}function ep(t){return j(t)&&"__vccOpts"in t}const Ye=(t,e)=>jf(t,e,xs);function Cu(t,e,n){try{fi(-1);const s=arguments.length;return s===2?he(e)&&!V(e)?di(e)?Me(t,null,[e]):Me(t,e):Me(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&di(n)&&(n=[n]),Me(t,e,n))}finally{fi(1)}}const tp="3.5.27";let qr;const jl=typeof window<"u"&&window.trustedTypes;if(jl)try{qr=jl.createPolicy("vue",{createHTML:t=>t})}catch{}const Eu=qr?t=>qr.createHTML(t):t=>t,np="http://www.w3.org/2000/svg",sp="http://www.w3.org/1998/Math/MathML",wt=typeof document<"u"?document:null,$l=wt&&wt.createElement("template"),ip={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?wt.createElementNS(np,t):e==="mathml"?wt.createElementNS(sp,t):n?wt.createElement(t,{is:n}):wt.createElement(t);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>wt.createTextNode(t),createComment:t=>wt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>wt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{$l.innerHTML=Eu(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=$l.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rp=Symbol("_vtc");function op(t,e,n){const s=t[rp];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Gl=Symbol("_vod"),lp=Symbol("_vsh"),ap=Symbol(""),cp=/(?:^|;)\s*display\s*:/;function up(t,e,n){const s=t.style,i=me(n);let r=!1;if(n&&!i){if(e)if(me(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&ii(s,l,"")}else for(const o in e)n[o]==null&&ii(s,o,"");for(const o in n)o==="display"&&(r=!0),ii(s,o,n[o])}else if(i){if(e!==n){const o=s[ap];o&&(n+=";"+o),s.cssText=n,r=cp.test(n)}}else e&&t.removeAttribute("style");Gl in t&&(t[Gl]=r?s.display:"",t[lp]&&(s.display="none"))}const ql=/\s*!important$/;function ii(t,e,n){if(V(n))n.forEach(s=>ii(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=hp(t,e);ql.test(n)?t.setProperty(en(s),n.replace(ql,""),"important"):t[s]=n}}const Kl=["Webkit","Moz","ms"],_r={};function hp(t,e){const n=_r[e];if(n)return n;let s=Xe(e);if(s!=="filter"&&s in t)return _r[e]=s;s=Li(s);for(let i=0;i<Kl.length;i++){const r=Kl[i]+s;if(r in t)return _r[e]=r}return e}const zl="http://www.w3.org/1999/xlink";function Yl(t,e,n,s,i,r=mf(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(zl,e.slice(6,e.length)):t.setAttributeNS(zl,e,n):n==null||r&&!yc(n)?t.removeAttribute(e):t.setAttribute(e,r?"":Zt(n)?String(n):n)}function Ql(t,e,n,s,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Eu(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=yc(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Tn(t,e,n,s){t.addEventListener(e,n,s)}function fp(t,e,n,s){t.removeEventListener(e,n,s)}const Jl=Symbol("_vei");function dp(t,e,n,s,i=null){const r=t[Jl]||(t[Jl]={}),o=r[e];if(s&&o)o.value=s;else{const[l,a]=pp(e);if(s){const c=r[e]=mp(s,i);Tn(t,l,c,a)}else o&&(fp(t,l,o,a),r[e]=void 0)}}const Xl=/(?:Once|Passive|Capture)$/;function pp(t){let e;if(Xl.test(t)){e={};let s;for(;s=t.match(Xl);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):en(t.slice(2)),e]}let gr=0;const _p=Promise.resolve(),gp=()=>gr||(_p.then(()=>gr=0),gr=Date.now());function mp(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;yt(yp(s,n.value),e,5,[s])};return n.value=t,n.attached=gp(),n}function yp(t,e){if(V(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const Zl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,vp=(t,e,n,s,i,r)=>{const o=i==="svg";e==="class"?op(t,s,o):e==="style"?up(t,n,s):Di(e)?bo(e)||dp(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bp(t,e,s,o))?(Ql(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Yl(t,e,s,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!me(s))?Ql(t,Xe(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Yl(t,e,s,o))};function bp(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Zl(e)&&j(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Zl(e)&&me(n)?!1:e in t}const ea=t=>{const e=t.props["onUpdate:modelValue"]||!1;return V(e)?n=>ei(e,n):e};function Cp(t){t.target.composing=!0}function ta(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const mr=Symbol("_assign");function na(t,e,n){return e&&(t=t.trim()),n&&(t=wo(t)),t}const ri={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[mr]=ea(i);const r=s||i.props&&i.props.type==="number";Tn(t,e?"change":"input",o=>{o.target.composing||t[mr](na(t.value,n,r))}),(n||r)&&Tn(t,"change",()=>{t.value=na(t.value,n,r)}),e||(Tn(t,"compositionstart",Cp),Tn(t,"compositionend",ta),Tn(t,"change",ta))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(t[mr]=ea(o),t.composing)return;const l=(r||t.type==="number")&&!/^0\d/.test(t.value)?wo(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||i&&t.value.trim()===a)||(t.value=a))}},Ep={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},wp=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(i=>{if(!("key"in i))return;const r=en(i.key);if(e.some(o=>o===r||Ep[o]===r))return t(i)}))},Sp=Te({patchProp:vp},ip);let sa;function Ip(){return sa||(sa=Ld(Sp))}const Tp=((...t)=>{const e=Ip().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=Rp(s);if(!i)return;const r=e._component;!j(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,xp(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function xp(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Rp(t){return me(t)?document.querySelector(t):t}const Ap=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},Np={};function Pp(t,e){const n=Xc("router-view");return le(),gu(n)}const Op=Ap(Np,[["render",Pp]]);const xn=typeof document<"u";function wu(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Dp(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&wu(t.default)}const J=Object.assign;function yr(t,e){const n={};for(const s in e){const i=e[s];n[s]=rt(i)?i.map(t):t(i)}return n}const gs=()=>{},rt=Array.isArray;function ia(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Su=/#/g,kp=/&/g,Mp=/\//g,Lp=/=/g,Fp=/\?/g,Iu=/\+/g,Bp=/%5B/g,Hp=/%5D/g,Tu=/%5E/g,Up=/%60/g,xu=/%7B/g,Wp=/%7C/g,Ru=/%7D/g,Vp=/%20/g;function Fo(t){return t==null?"":encodeURI(""+t).replace(Wp,"|").replace(Bp,"[").replace(Hp,"]")}function jp(t){return Fo(t).replace(xu,"{").replace(Ru,"}").replace(Tu,"^")}function Kr(t){return Fo(t).replace(Iu,"%2B").replace(Vp,"+").replace(Su,"%23").replace(kp,"%26").replace(Up,"`").replace(xu,"{").replace(Ru,"}").replace(Tu,"^")}function $p(t){return Kr(t).replace(Lp,"%3D")}function Gp(t){return Fo(t).replace(Su,"%23").replace(Fp,"%3F")}function qp(t){return Gp(t).replace(Mp,"%2F")}function Rs(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Kp=/\/$/,zp=t=>t.replace(Kp,"");function vr(t,e,n="/"){let s,i={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(s=e.slice(0,a),r=e.slice(a,l>0?l:e.length),i=t(r.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=Xp(s??e,n),{fullPath:s+r+o,path:s,query:i,hash:Rs(o)}}function Yp(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ra(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Qp(t,e,n){const s=e.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Hn(e.matched[s],n.matched[i])&&Au(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Hn(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Au(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!Jp(t[n],e[n]))return!1;return!0}function Jp(t,e){return rt(t)?oa(t,e):rt(e)?oa(e,t):t?.valueOf()===e?.valueOf()}function oa(t,e){return rt(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Xp(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Ht={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let zr=(function(t){return t.pop="pop",t.push="push",t})({}),br=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Zp(t){if(!t)if(xn){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),zp(t)}const e_=/^[^#]+#/;function t_(t,e){return t.replace(e_,"#")+e}function n_(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const qi=()=>({left:window.scrollX,top:window.scrollY});function s_(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=n_(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function la(t,e){return(history.state?history.state.position-e:-1)+t}const Yr=new Map;function i_(t,e){Yr.set(t,e)}function r_(t){const e=Yr.get(t);return Yr.delete(t),e}function o_(t){return typeof t=="string"||t&&typeof t=="object"}function Nu(t){return typeof t=="string"||typeof t=="symbol"}let pe=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Pu=Symbol("");pe.MATCHER_NOT_FOUND+"",pe.NAVIGATION_GUARD_REDIRECT+"",pe.NAVIGATION_ABORTED+"",pe.NAVIGATION_CANCELLED+"",pe.NAVIGATION_DUPLICATED+"";function Un(t,e){return J(new Error,{type:t,[Pu]:!0},e)}function Et(t,e){return t instanceof Error&&Pu in t&&(e==null||!!(t.type&e))}const l_=["params","query","hash"];function a_(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of l_)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function c_(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(Iu," "),r=i.indexOf("="),o=Rs(r<0?i:i.slice(0,r)),l=r<0?null:Rs(i.slice(r+1));if(o in e){let a=e[o];rt(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function aa(t){let e="";for(let n in t){const s=t[n];if(n=$p(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(rt(s)?s.map(i=>i&&Kr(i)):[s&&Kr(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function u_(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=rt(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const h_=Symbol(""),ca=Symbol(""),Ki=Symbol(""),Bo=Symbol(""),Qr=Symbol("");function ts(){let t=[];function e(s){return t.push(s),()=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function jt(t,e,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((l,a)=>{const c=f=>{f===!1?a(Un(pe.NAVIGATION_ABORTED,{from:n,to:e})):f instanceof Error?a(f):o_(f)?a(Un(pe.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),l())},u=r(()=>t.call(s&&s.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(f=>a(f))})}function Cr(t,e,n,s,i=r=>r()){const r=[];for(const o of t)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(wu(a)){const c=(a.__vccOpts||a)[e];c&&r.push(jt(c,n,s,o,l,i))}else{let c=a();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const h=Dp(u)?u.default:u;o.mods[l]=u,o.components[l]=h;const f=(h.__vccOpts||h)[e];return f&&jt(f,n,s,o,l,i)()}))}}return r}function f_(t,e){const n=[],s=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(t.matched.find(c=>Hn(c,l))?s.push(l):n.push(l));const a=t.matched[o];a&&(e.matched.find(c=>Hn(c,a))||i.push(a))}return[n,s,i]}let d_=()=>location.protocol+"//"+location.host;function Ou(t,e){const{pathname:n,search:s,hash:i}=e,r=t.indexOf("#");if(r>-1){let o=i.includes(t.slice(r))?t.slice(r).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),ra(l,"")}return ra(n,t)+s+i}function p_(t,e,n,s){let i=[],r=[],o=null;const l=({state:f})=>{const p=Ou(t,location),m=n.value,y=e.value;let R=0;if(f){if(n.value=p,e.value=f,o&&o===m){o=null;return}R=y?f.position-y.position:0}else s(p);i.forEach(x=>{x(n.value,m,{delta:R,type:zr.pop,direction:R?R>0?br.forward:br.back:br.unknown})})};function a(){o=n.value}function c(f){i.push(f);const p=()=>{const m=i.indexOf(f);m>-1&&i.splice(m,1)};return r.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(J({},f.state,{scroll:qi()}),"")}}function h(){for(const f of r)f();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:c,destroy:h}}function ua(t,e,n,s=!1,i=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:i?qi():null}}function __(t){const{history:e,location:n}=window,s={value:Ou(t,n)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,c,u){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+a:d_()+t+a;try{e[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),n[u?"replace":"assign"](f)}}function o(a,c){r(a,J({},e.state,ua(i.value.back,a,i.value.forward,!0),c,{position:i.value.position}),!0),s.value=a}function l(a,c){const u=J({},i.value,e.state,{forward:a,scroll:qi()});r(u.current,u,!0),r(a,J({},ua(s.value,a,null),{position:u.position+1},c),!1),s.value=a}return{location:s,state:i,push:l,replace:o}}function g_(t){t=Zp(t);const e=__(t),n=p_(t,e.state,e.location,e.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=J({location:"",base:t,go:s,createHref:t_.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function m_(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),g_(t)}let un=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ye=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ye||{});const y_={type:un.Static,value:""},v_=/[a-zA-Z0-9_]/;function b_(t){if(!t)return[[]];if(t==="/")return[[y_]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${c}": ${p}`)}let n=ye.Static,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let l=0,a,c="",u="";function h(){c&&(n===ye.Static?r.push({type:un.Static,value:c}):n===ye.Param||n===ye.ParamRegExp||n===ye.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:un.Param,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&n!==ye.ParamRegExp){s=n,n=ye.EscapeNext;continue}switch(n){case ye.Static:a==="/"?(c&&h(),o()):a===":"?(h(),n=ye.Param):f();break;case ye.EscapeNext:f(),n=s;break;case ye.Param:a==="("?n=ye.ParamRegExp:v_.test(a)?f():(h(),n=ye.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case ye.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:n=ye.ParamRegExpEnd:u+=a;break;case ye.ParamRegExpEnd:h(),n=ye.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return n===ye.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}const ha="[^/]+?",C_={sensitive:!1,strict:!1,start:!0,end:!0};var De=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(De||{});const E_=/[.+*?^${}()[\]/\\]/g;function w_(t,e){const n=J({},C_,e),s=[];let i=n.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[De.Root];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const f=c[h];let p=De.Segment+(n.sensitive?De.BonusCaseSensitive:0);if(f.type===un.Static)h||(i+="/"),i+=f.value.replace(E_,"\\$&"),p+=De.Static;else if(f.type===un.Param){const{value:m,repeatable:y,optional:R,regexp:x}=f;r.push({name:m,repeatable:y,optional:R});const O=x||ha;if(O!==ha){p+=De.BonusCustomRegExp;try{`${O}`}catch(M){throw new Error(`Invalid custom RegExp for param "${m}" (${O}): `+M.message)}}let L=y?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;h||(L=R&&c.length<2?`(?:/${L})`:"/"+L),R&&(L+="?"),i+=L,p+=De.Dynamic,R&&(p+=De.BonusOptional),y&&(p+=De.BonusRepeatable),O===".*"&&(p+=De.BonusWildcard)}u.push(p)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=De.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function l(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=r[f-1];h[m.name]=p&&m.repeatable?p.split("/"):p}return h}function a(c){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const p of f)if(p.type===un.Static)u+=p.value;else if(p.type===un.Param){const{value:m,repeatable:y,optional:R}=p,x=m in c?c[m]:"";if(rt(x)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const O=rt(x)?x.join("/"):x;if(!O)if(R)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=O}}return u||"/"}return{re:o,score:s,keys:r,parse:l,stringify:a}}function S_(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===De.Static+De.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===De.Static+De.Segment?1:-1:0}function Du(t,e){let n=0;const s=t.score,i=e.score;for(;n<s.length&&n<i.length;){const r=S_(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(fa(s))return 1;if(fa(i))return-1}return i.length-s.length}function fa(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const I_={strict:!1,end:!0,sensitive:!1};function T_(t,e,n){const s=w_(b_(t.path),n),i=J(s,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function x_(t,e){const n=[],s=new Map;e=ia(I_,e);function i(h){return s.get(h)}function r(h,f,p){const m=!p,y=pa(h);y.aliasOf=p&&p.record;const R=ia(e,h),x=[y];if("alias"in h){const M=typeof h.alias=="string"?[h.alias]:h.alias;for(const se of M)x.push(pa(J({},y,{components:p?p.record.components:y.components,path:se,aliasOf:p?p.record:y})))}let O,L;for(const M of x){const{path:se}=M;if(f&&se[0]!=="/"){const Se=f.record.path,de=Se[Se.length-1]==="/"?"":"/";M.path=f.record.path+(se&&de+se)}if(O=T_(M,f,R),p?p.alias.push(O):(L=L||O,L!==O&&L.alias.push(O),m&&h.name&&!_a(O)&&o(h.name)),ku(O)&&a(O),y.children){const Se=y.children;for(let de=0;de<Se.length;de++)r(Se[de],O,p&&p.children[de])}p=p||O}return L?()=>{o(L)}:gs}function o(h){if(Nu(h)){const f=s.get(h);f&&(s.delete(h),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(h);f>-1&&(n.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function l(){return n}function a(h){const f=N_(h,n);n.splice(f,0,h),h.record.name&&!_a(h)&&s.set(h.record.name,h)}function c(h,f){let p,m={},y,R;if("name"in h&&h.name){if(p=s.get(h.name),!p)throw Un(pe.MATCHER_NOT_FOUND,{location:h});R=p.record.name,m=J(da(f.params,p.keys.filter(L=>!L.optional).concat(p.parent?p.parent.keys.filter(L=>L.optional):[]).map(L=>L.name)),h.params&&da(h.params,p.keys.map(L=>L.name))),y=p.stringify(m)}else if(h.path!=null)y=h.path,p=n.find(L=>L.re.test(y)),p&&(m=p.parse(y),R=p.record.name);else{if(p=f.name?s.get(f.name):n.find(L=>L.re.test(f.path)),!p)throw Un(pe.MATCHER_NOT_FOUND,{location:h,currentLocation:f});R=p.record.name,m=J({},f.params,h.params),y=p.stringify(m)}const x=[];let O=p;for(;O;)x.unshift(O.record),O=O.parent;return{name:R,path:y,params:m,matched:x,meta:A_(x)}}t.forEach(h=>r(h));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:i}}function da(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function pa(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:R_(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function R_(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function _a(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function A_(t){return t.reduce((e,n)=>J(e,n.meta),{})}function N_(t,e){let n=0,s=e.length;for(;n!==s;){const r=n+s>>1;Du(t,e[r])<0?s=r:n=r+1}const i=P_(t);return i&&(s=e.lastIndexOf(i,s-1)),s}function P_(t){let e=t;for(;e=e.parent;)if(ku(e)&&Du(t,e)===0)return e}function ku({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function ga(t){const e=nt(Ki),n=nt(Bo),s=Ye(()=>{const a=qt(t.to);return e.resolve(a)}),i=Ye(()=>{const{matched:a}=s.value,{length:c}=a,u=a[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Hn.bind(null,u));if(f>-1)return f;const p=ma(a[c-2]);return c>1&&ma(u)===p&&h[h.length-1].path!==p?h.findIndex(Hn.bind(null,a[c-2])):f}),r=Ye(()=>i.value>-1&&L_(n.params,s.value.params)),o=Ye(()=>i.value>-1&&i.value===n.matched.length-1&&Au(n.params,s.value.params));function l(a={}){if(M_(a)){const c=e[qt(t.replace)?"replace":"push"](qt(t.to)).catch(gs);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Ye(()=>s.value.href),isActive:r,isExactActive:o,navigate:l}}function O_(t){return t.length===1?t[0]:t}const D_=Kc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ga,setup(t,{slots:e}){const n=Ui(ga(t)),{options:s}=nt(Ki),i=Ye(()=>({[ya(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[ya(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&O_(e.default(n));return t.custom?r:Cu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),k_=D_;function M_(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function L_(t,e){for(const n in e){const s=e[n],i=t[n];if(typeof s=="string"){if(s!==i)return!1}else if(!rt(i)||i.length!==s.length||s.some((r,o)=>r.valueOf()!==i[o].valueOf()))return!1}return!0}function ma(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ya=(t,e,n)=>t??e??n,F_=Kc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=nt(Qr),i=Ye(()=>t.route||s.value),r=nt(ca,0),o=Ye(()=>{let c=qt(r);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),l=Ye(()=>i.value.matched[o.value]);ni(ca,Ye(()=>o.value+1)),ni(h_,l),ni(Qr,i);const a=Tt();return hs(()=>[a.value,l.value,t.name],([c,u,h],[f,p,m])=>{u&&(u.instances[h]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Hn(u,p)||!f)&&(u.enterCallbacks[h]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=l.value,f=h&&h.components[u];if(!f)return va(n.default,{Component:f,route:c});const p=h.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,R=Cu(f,J({},m,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(h.instances[u]=null)},ref:a}));return va(n.default,{Component:R,route:c})||R}}});function va(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const B_=F_;function H_(t){const e=x_(t.routes,t),n=t.parseQuery||c_,s=t.stringifyQuery||aa,i=t.history,r=ts(),o=ts(),l=ts(),a=Hf(Ht);let c=Ht;xn&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=yr.bind(null,C=>""+C),h=yr.bind(null,qp),f=yr.bind(null,Rs);function p(C,k){let N,F;return Nu(C)?(N=e.getRecordMatcher(C),F=k):F=C,e.addRoute(F,N)}function m(C){const k=e.getRecordMatcher(C);k&&e.removeRoute(k)}function y(){return e.getRoutes().map(C=>C.record)}function R(C){return!!e.getRecordMatcher(C)}function x(C,k){if(k=J({},k||a.value),typeof C=="string"){const g=vr(n,C,k.path),v=e.resolve({path:g.path},k),E=i.createHref(g.fullPath);return J(g,v,{params:f(v.params),hash:Rs(g.hash),redirectedFrom:void 0,href:E})}let N;if(C.path!=null)N=J({},C,{path:vr(n,C.path,k.path).path});else{const g=J({},C.params);for(const v in g)g[v]==null&&delete g[v];N=J({},C,{params:h(g)}),k.params=h(k.params)}const F=e.resolve(N,k),K=C.hash||"";F.params=u(f(F.params));const d=Yp(s,J({},C,{hash:jp(K),path:F.path})),_=i.createHref(d);return J({fullPath:d,hash:K,query:s===aa?u_(C.query):C.query||{}},F,{redirectedFrom:void 0,href:_})}function O(C){return typeof C=="string"?vr(n,C,a.value.path):J({},C)}function L(C,k){if(c!==C)return Un(pe.NAVIGATION_CANCELLED,{from:k,to:C})}function M(C){return de(C)}function se(C){return M(J(O(C),{replace:!0}))}function Se(C,k){const N=C.matched[C.matched.length-1];if(N&&N.redirect){const{redirect:F}=N;let K=typeof F=="function"?F(C,k):F;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=O(K):{path:K},K.params={}),J({query:C.query,hash:C.hash,params:K.path!=null?{}:C.params},K)}}function de(C,k){const N=c=x(C),F=a.value,K=C.state,d=C.force,_=C.replace===!0,g=Se(N,F);if(g)return de(J(O(g),{state:typeof g=="object"?J({},K,g.state):K,force:d,replace:_}),k||N);const v=N;v.redirectedFrom=k;let E;return!d&&Qp(s,F,N)&&(E=Un(pe.NAVIGATION_DUPLICATED,{to:v,from:F}),ut(F,F,!0,!1)),(E?Promise.resolve(E):at(v,F)).catch(b=>Et(b)?Et(b,pe.NAVIGATION_GUARD_REDIRECT)?b:Bt(b):Q(b,v,F)).then(b=>{if(b){if(Et(b,pe.NAVIGATION_GUARD_REDIRECT))return de(J({replace:_},O(b.to),{state:typeof b.to=="object"?J({},K,b.to.state):K,force:d}),k||v)}else b=nn(v,F,!0,_,K);return Ft(v,F,b),b})}function lt(C,k){const N=L(C,k);return N?Promise.reject(N):Promise.resolve()}function Lt(C){const k=En.values().next().value;return k&&typeof k.runWithContext=="function"?k.runWithContext(C):C()}function at(C,k){let N;const[F,K,d]=f_(C,k);N=Cr(F.reverse(),"beforeRouteLeave",C,k);for(const g of F)g.leaveGuards.forEach(v=>{N.push(jt(v,C,k))});const _=lt.bind(null,C,k);return N.push(_),ze(N).then(()=>{N=[];for(const g of r.list())N.push(jt(g,C,k));return N.push(_),ze(N)}).then(()=>{N=Cr(K,"beforeRouteUpdate",C,k);for(const g of K)g.updateGuards.forEach(v=>{N.push(jt(v,C,k))});return N.push(_),ze(N)}).then(()=>{N=[];for(const g of d)if(g.beforeEnter)if(rt(g.beforeEnter))for(const v of g.beforeEnter)N.push(jt(v,C,k));else N.push(jt(g.beforeEnter,C,k));return N.push(_),ze(N)}).then(()=>(C.matched.forEach(g=>g.enterCallbacks={}),N=Cr(d,"beforeRouteEnter",C,k,Lt),N.push(_),ze(N))).then(()=>{N=[];for(const g of o.list())N.push(jt(g,C,k));return N.push(_),ze(N)}).catch(g=>Et(g,pe.NAVIGATION_CANCELLED)?g:Promise.reject(g))}function Ft(C,k,N){l.list().forEach(F=>Lt(()=>F(C,k,N)))}function nn(C,k,N,F,K){const d=L(C,k);if(d)return d;const _=k===Ht,g=xn?history.state:{};N&&(F||_?i.replace(C.fullPath,J({scroll:_&&g&&g.scroll},K)):i.push(C.fullPath,K)),a.value=C,ut(C,k,N,_),Bt()}let ct;function Jn(){ct||(ct=i.listen((C,k,N)=>{if(!sn.listening)return;const F=x(C),K=Se(F,sn.currentRoute.value);if(K){de(J(K,{replace:!0,force:!0}),F).catch(gs);return}c=F;const d=a.value;xn&&i_(la(d.fullPath,N.delta),qi()),at(F,d).catch(_=>Et(_,pe.NAVIGATION_ABORTED|pe.NAVIGATION_CANCELLED)?_:Et(_,pe.NAVIGATION_GUARD_REDIRECT)?(de(J(O(_.to),{force:!0}),F).then(g=>{Et(g,pe.NAVIGATION_ABORTED|pe.NAVIGATION_DUPLICATED)&&!N.delta&&N.type===zr.pop&&i.go(-1,!1)}).catch(gs),Promise.reject()):(N.delta&&i.go(-N.delta,!1),Q(_,F,d))).then(_=>{_=_||nn(F,d,!1),_&&(N.delta&&!Et(_,pe.NAVIGATION_CANCELLED)?i.go(-N.delta,!1):N.type===zr.pop&&Et(_,pe.NAVIGATION_ABORTED|pe.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),Ft(F,d,_)}).catch(gs)}))}let bn=ts(),ve=ts(),te;function Q(C,k,N){Bt(C);const F=ve.list();return F.length?F.forEach(K=>K(C,k,N)):console.error(C),Promise.reject(C)}function bt(){return te&&a.value!==Ht?Promise.resolve():new Promise((C,k)=>{bn.add([C,k])})}function Bt(C){return te||(te=!C,Jn(),bn.list().forEach(([k,N])=>C?N(C):k()),bn.reset()),C}function ut(C,k,N,F){const{scrollBehavior:K}=t;if(!xn||!K)return Promise.resolve();const d=!N&&r_(la(C.fullPath,0))||(F||!N)&&history.state&&history.state.scroll||null;return Hc().then(()=>K(C,k,d)).then(_=>_&&s_(_)).catch(_=>Q(_,C,k))}const Fe=C=>i.go(C);let Cn;const En=new Set,sn={currentRoute:a,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:R,getRoutes:y,resolve:x,options:t,push:M,replace:se,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:ve.add,isReady:bt,install(C){C.component("RouterLink",k_),C.component("RouterView",B_),C.config.globalProperties.$router=sn,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>qt(a)}),xn&&!Cn&&a.value===Ht&&(Cn=!0,M(i.location).catch(F=>{}));const k={};for(const F in Ht)Object.defineProperty(k,F,{get:()=>a.value[F],enumerable:!0});C.provide(Ki,sn),C.provide(Bo,Mc(k)),C.provide(Qr,a);const N=C.unmount;En.add(C),C.unmount=function(){En.delete(C),En.size<1&&(c=Ht,ct&&ct(),ct=null,a.value=Ht,Cn=!1,te=!1),N()}}};function ze(C){return C.reduce((k,N)=>k.then(()=>Lt(N)),Promise.resolve())}return sn}function U_(){return nt(Ki)}function W_(t){return nt(Bo)}const V_=()=>{};var ba={};const Mu={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const S=function(t,e){if(!t)throw Kn(e)},Kn=function(t){return new Error("Firebase Database ("+Mu.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};const Lu=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},j_=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(a>>10)),e[s++]=String.fromCharCode(56320+(a&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},Ho={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,u=r>>2,h=(r&3)<<4|l>>4;let f=(l&15)<<2|c>>6,p=c&63;a||(p=64,o||(f=64)),s.push(n[u],n[h],n[f],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):j_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||l==null||c==null||h==null)throw new $_;const f=r<<2|l>>4;if(s.push(f),c!==64){const p=l<<4&240|c>>2;if(s.push(p),h!==64){const m=c<<6&192|h;s.push(m)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fu=function(t){const e=Lu(t);return Ho.encodeByteArray(e,!0)},_i=function(t){return Fu(t).replace(/\./g,"")},Jr=function(t){try{return Ho.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function G_(t){return Bu(void 0,t)}function Bu(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!q_(n)||(t[n]=Bu(t[n],e[n]));return t}function q_(t){return t!=="__proto__"}function K_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const z_=()=>K_().__FIREBASE_DEFAULTS__,Y_=()=>{if(typeof process>"u"||typeof ba>"u")return;const t=ba.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Q_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jr(t[1]);return e&&JSON.parse(e)},Hu=()=>{try{return V_()||z_()||Y_()||Q_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J_=t=>Hu()?.emulatorHosts?.[t],X_=t=>{const e=J_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Uu=()=>Hu()?.config;class Us{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Uo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z_(t){return(await fetch(t,{credentials:"include"})).ok}function eg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_i(JSON.stringify(n)),_i(JSON.stringify(o)),""].join(".")}const ms={};function tg(){const t={prod:[],emulator:[]};for(const e of Object.keys(ms))ms[e]?t.emulator.push(e):t.prod.push(e);return t}function ng(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ca=!1;function sg(t,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||ms[t]===e||ms[t]||Ca)return;ms[t]=e;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",r=tg().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function a(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Ca=!0,o()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=ng(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),R=document.getElementById(y)||document.createElement("a"),x=n("preprendIcon"),O=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const L=f.element;l(L),u(R,y);const M=c();a(O,x),L.append(O,m,R,M),document.body.appendChild(L)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function ig(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ig())}function rg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function og(){return Mu.NODE_ADMIN===!0}function lg(){try{return typeof indexedDB=="object"}catch{return!1}}function ag(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const cg="FirebaseError";class Ws extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=cg,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?ug(r,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Ws(i,l,s)}}function ug(t,e){return t.replace(hg,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const hg=/\{\$([^}]+)}/g;function As(t){return JSON.parse(t)}function we(t){return JSON.stringify(t)}const ju=function(t){let e={},n={},s={},i="";try{const r=t.split(".");e=As(Jr(r[0])||""),n=As(Jr(r[1])||""),i=r[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:i}},fg=function(t){const e=ju(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},dg=function(t){const e=ju(t).claims;return typeof e=="object"&&e.admin===!0};function vt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ea(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gi(t,e,n){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=e.call(n,t[i],i,t));return s}function mi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(wa(r)&&wa(o)){if(!mi(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function wa(t){return t!==null&&typeof t=="object"}function pg(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}class _g{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)s[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)s[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=s[h-3]^s[h-8]^s[h-14]^s[h-16];s[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],r=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=l^r&(o^l),u=1518500249):(c=r^o^l,u=1859775393):h<60?(c=r&o|l&(r|o),u=2400959708):(c=r^o^l,u=3395469782);const f=(i<<5|i>>>27)+c+a+u+s[h]&4294967295;a=l,l=o,o=(r<<30|r>>>2)&4294967295,r=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let i=0;const r=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(r[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<n;)if(r[o]=e[i],++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[i]>>r&255,++s;return e}}function zi(t,e){return`${t} failed: ${e} argument `}const gg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);if(i>=55296&&i<=56319){const r=i-55296;s++,S(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;i=65536+(r<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Yi=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};function Vs(t){return t&&t._delegate?t._delegate:t}class Ns{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const an="[DEFAULT]";class mg{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Us;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vg(e))try{this.getOrInitializeService({instanceIdentifier:an})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=an){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=an){return this.instances.has(e)}getOptions(e=an){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);s===l&&o.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yg(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=an){return this.component?this.component.multipleInstances?e:an:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yg(t){return t===an?void 0:t}function vg(t){return t.instantiationMode==="EAGER"}class bg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const Cg={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},Eg=ce.INFO,wg={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},Sg=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=wg[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $u{constructor(e){this.name=e,this._logLevel=Eg,this._logHandler=Sg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const Ig=(t,e)=>e.some(n=>t instanceof n);let Sa,Ia;function Tg(){return Sa||(Sa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xg(){return Ia||(Ia=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gu=new WeakMap,Xr=new WeakMap,qu=new WeakMap,Er=new WeakMap,Wo=new WeakMap;function Rg(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Kt(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gu.set(n,t)}).catch(()=>{}),Wo.set(e,t),e}function Ag(t){if(Xr.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Xr.set(t,e)}let Zr={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ng(t){Zr=t(Zr)}function Pg(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(wr(this),e,...n);return qu.set(s,e.sort?e.sort():[e]),Kt(s)}:xg().includes(t)?function(...e){return t.apply(wr(this),e),Kt(Gu.get(this))}:function(...e){return Kt(t.apply(wr(this),e))}}function Og(t){return typeof t=="function"?Pg(t):(t instanceof IDBTransaction&&Ag(t),Ig(t,Tg())?new Proxy(t,Zr):t)}function Kt(t){if(t instanceof IDBRequest)return Rg(t);if(Er.has(t))return Er.get(t);const e=Og(t);return e!==t&&(Er.set(t,e),Wo.set(e,t)),e}const wr=t=>Wo.get(t);function Dg(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),l=Kt(o);return s&&o.addEventListener("upgradeneeded",a=>{s(Kt(o.result),a.oldVersion,a.newVersion,Kt(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{r&&a.addEventListener("close",()=>r()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const kg=["get","getKey","getAll","getAllKeys","count"],Mg=["put","add","delete","clear"],Sr=new Map;function Ta(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sr.get(e))return Sr.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=Mg.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||kg.includes(n)))return;const r=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let c=a.store;return s&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&a.done]))[0]};return Sr.set(e,r),r}Ng(t=>({...t,get:(e,n,s)=>Ta(e,n)||t.get(e,n,s),has:(e,n)=>!!Ta(e,n)||t.has(e,n)}));class Lg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fg(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Fg(t){return t.getComponent()?.type==="VERSION"}const eo="@firebase/app",xa="0.14.7";const Dt=new $u("@firebase/app"),Bg="@firebase/app-compat",Hg="@firebase/analytics-compat",Ug="@firebase/analytics",Wg="@firebase/app-check-compat",Vg="@firebase/app-check",jg="@firebase/auth",$g="@firebase/auth-compat",Gg="@firebase/database",qg="@firebase/data-connect",Kg="@firebase/database-compat",zg="@firebase/functions",Yg="@firebase/functions-compat",Qg="@firebase/installations",Jg="@firebase/installations-compat",Xg="@firebase/messaging",Zg="@firebase/messaging-compat",em="@firebase/performance",tm="@firebase/performance-compat",nm="@firebase/remote-config",sm="@firebase/remote-config-compat",im="@firebase/storage",rm="@firebase/storage-compat",om="@firebase/firestore",lm="@firebase/ai",am="@firebase/firestore-compat",cm="firebase",um="12.8.0";const to="[DEFAULT]",hm={[eo]:"fire-core",[Bg]:"fire-core-compat",[Ug]:"fire-analytics",[Hg]:"fire-analytics-compat",[Vg]:"fire-app-check",[Wg]:"fire-app-check-compat",[jg]:"fire-auth",[$g]:"fire-auth-compat",[Gg]:"fire-rtdb",[qg]:"fire-data-connect",[Kg]:"fire-rtdb-compat",[zg]:"fire-fn",[Yg]:"fire-fn-compat",[Qg]:"fire-iid",[Jg]:"fire-iid-compat",[Xg]:"fire-fcm",[Zg]:"fire-fcm-compat",[em]:"fire-perf",[tm]:"fire-perf-compat",[nm]:"fire-rc",[sm]:"fire-rc-compat",[im]:"fire-gcs",[rm]:"fire-gcs-compat",[om]:"fire-fst",[am]:"fire-fst-compat",[lm]:"fire-vertex","fire-js":"fire-js",[cm]:"fire-js-all"};const yi=new Map,fm=new Map,no=new Map;function Ra(t,e){try{t.container.addComponent(e)}catch(n){Dt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vi(t){const e=t.name;if(no.has(e))return Dt.debug(`There were multiple attempts to register component ${e}.`),!1;no.set(e,t);for(const n of yi.values())Ra(n,t);for(const n of fm.values())Ra(n,t);return!0}function dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pm(t){return t==null?!1:t.settings!==void 0}const _m={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zt=new Vu("app","Firebase",_m);class gm{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zt.create("app-deleted",{appName:this._name})}}const mm=um;function Ku(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:to,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw zt.create("bad-app-name",{appName:String(i)});if(n||(n=Uu()),!n)throw zt.create("no-options");const r=yi.get(i);if(r){if(mi(n,r.options)&&mi(s,r.config))return r;throw zt.create("duplicate-app",{appName:i})}const o=new bg(i);for(const a of no.values())o.addComponent(a);const l=new gm(n,s,o);return yi.set(i,l),l}function ym(t=to){const e=yi.get(t);if(!e&&t===to&&Uu())return Ku();if(!e)throw zt.create("no-app",{appName:t});return e}function Dn(t,e,n){let s=hm[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dt.warn(o.join(" "));return}vi(new Ns(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const vm="firebase-heartbeat-database",bm=1,Ps="firebase-heartbeat-store";let Ir=null;function zu(){return Ir||(Ir=Dg(vm,bm,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ps)}catch(n){console.warn(n)}}}}).catch(t=>{throw zt.create("idb-open",{originalErrorMessage:t.message})})),Ir}async function Cm(t){try{const n=(await zu()).transaction(Ps),s=await n.objectStore(Ps).get(Yu(t));return await n.done,s}catch(e){if(e instanceof Ws)Dt.warn(e.message);else{const n=zt.create("idb-get",{originalErrorMessage:e?.message});Dt.warn(n.message)}}}async function Aa(t,e){try{const s=(await zu()).transaction(Ps,"readwrite");await s.objectStore(Ps).put(e,Yu(t)),await s.done}catch(n){if(n instanceof Ws)Dt.warn(n.message);else{const s=zt.create("idb-set",{originalErrorMessage:n?.message});Dt.warn(s.message)}}}function Yu(t){return`${t.name}!${t.options.appId}`}const Em=1024,wm=30;class Sm{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tm(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Na();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>wm){const i=xm(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Dt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Na(),{heartbeatsToSend:n,unsentEntries:s}=Im(this._heartbeatsCache.heartbeats),i=_i(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Dt.warn(e),""}}}function Na(){return new Date().toISOString().substring(0,10)}function Im(t,e=Em){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Pa(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pa(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Tm{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lg()?ag().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Cm(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Aa(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Aa(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Pa(t){return _i(JSON.stringify({version:2,heartbeats:t})).length}function xm(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function Rm(t){vi(new Ns("platform-logger",e=>new Lg(e),"PRIVATE")),vi(new Ns("heartbeat",e=>new Sm(e),"PRIVATE")),Dn(eo,xa,t),Dn(eo,xa,"esm2020"),Dn("fire-js","")}Rm("");var Am="firebase",Nm="12.8.0";Dn(Am,Nm,"app");var Oa={};const Da="@firebase/database",ka="1.1.0";let Qu="";function Pm(t){Qu=t}class Om{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),we(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:As(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Dm{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return vt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ju=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Om(e)}}catch{}return new Dm},hn=Ju("localStorage"),km=Ju("sessionStorage");const kn=new $u("@firebase/database"),Mm=(function(){let t=1;return function(){return t++}})(),Xu=function(t){const e=gg(t),n=new _g;n.update(e);const s=n.digest();return Ho.encodeByteArray(s)},js=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=js.apply(null,s):typeof s=="object"?e+=we(s):e+=s,e+=" "}return e};let ys=null,Ma=!0;const Lm=function(t,e){S(!0,"Can't turn on custom loggers persistently."),kn.logLevel=ce.VERBOSE,ys=kn.log.bind(kn)},Ie=function(...t){if(Ma===!0&&(Ma=!1,ys===null&&km.get("logging_enabled")===!0&&Lm()),ys){const e=js.apply(null,t);ys(e)}},$s=function(t){return function(...e){Ie(t,...e)}},so=function(...t){const e="FIREBASE INTERNAL ERROR: "+js(...t);kn.error(e)},kt=function(...t){const e=`FIREBASE FATAL ERROR: ${js(...t)}`;throw kn.error(e),new Error(e)},Le=function(...t){const e="FIREBASE WARNING: "+js(...t);kn.warn(e)},Fm=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Le("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Vo=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Bm=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Vn="[MIN_NAME]",pn="[MAX_NAME]",yn=function(t,e){if(t===e)return 0;if(t===Vn||e===pn)return-1;if(e===Vn||t===pn)return 1;{const n=La(t),s=La(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},Hm=function(t,e){return t===e?0:t<e?-1:1},ns=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+we(e))},jo=function(t){if(typeof t!="object"||t===null)return we(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=we(e[s]),n+=":",n+=jo(t[e[s]]);return n+="}",n},Zu=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let i=0;i<n;i+=e)i+e>n?s.push(t.substring(i,n)):s.push(t.substring(i,i+e));return s};function xe(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const eh=function(t){S(!Vo(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let i,r,o,l,a;t===0?(r=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),s),r=l+s,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(a=n;a;a-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(a=0;a<64;a+=8){let f=parseInt(u.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Um=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Wm=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Vm(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const jm=new RegExp("^-?(0*)\\d{1,10}$"),$m=-2147483648,Gm=2147483647,La=function(t){if(jm.test(t)){const e=Number(t);if(e>=$m&&e<=Gm)return e}return null},zn=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Le("Exception was thrown by user callback.",n),e},Math.floor(0))}},qm=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class Km{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,pm(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Le(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zm{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ie("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Le(e)}}class oi{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}oi.OWNER="owner";const $o="5",th="v",nh="s",sh="r",ih="f",rh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oh="ls",lh="p",io="ac",ah="websocket",ch="long_polling";class uh{constructor(e,n,s,i,r=!1,o="",l=!1,a=!1,c=null){this.secure=n,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Ym(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function hh(t,e,n){S(typeof e=="string","typeof type must == string"),S(typeof n=="object","typeof params must == object");let s;if(e===ah)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ch)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Ym(t)&&(n.ns=t.namespace);const i=[];return xe(n,(r,o)=>{i.push(r+"="+o)}),s+i.join("&")}class Qm{constructor(){this.counters_={}}incrementCounter(e,n=1){vt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return G_(this.counters_)}}const Tr={},xr={};function Go(t){const e=t.toString();return Tr[e]||(Tr[e]=new Qm),Tr[e]}function Jm(t,e){const n=t.toString();return xr[n]||(xr[n]=e()),xr[n]}class Xm{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&zn(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Fa="start",Zm="close",ey="pLPCommand",ty="pRTLPCB",fh="id",dh="pw",ph="ser",ny="cb",sy="seg",iy="ts",ry="d",oy="dframe",_h=1870,gh=30,ly=_h-gh,ay=25e3,cy=3e4;class Rn{constructor(e,n,s,i,r,o,l){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$s(e),this.stats_=Go(n),this.urlFn=a=>(this.appCheckToken&&(a[io]=this.appCheckToken),hh(n,ch,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Xm(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cy)),Bm(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qo((...r)=>{const[o,l,a,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Fa)this.id=l,this.password=a;else if(o===Zm)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,l]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const s={};s[Fa]="t",s[ph]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[ny]=this.scriptTagHolder.uniqueCallbackIdentifier),s[th]=$o,this.transportSessionId&&(s[nh]=this.transportSessionId),this.lastSessionId&&(s[oh]=this.lastSessionId),this.applicationId&&(s[lh]=this.applicationId),this.appCheckToken&&(s[io]=this.appCheckToken),typeof location<"u"&&location.hostname&&rh.test(location.hostname)&&(s[sh]=ih);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rn.forceAllow_=!0}static forceDisallow(){Rn.forceDisallow_=!0}static isAvailable(){return Rn.forceAllow_?!0:!Rn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Um()&&!Wm()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=we(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Fu(n),i=Zu(s,ly);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[oy]="t",s[fh]=e,s[dh]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=we(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class qo{constructor(e,n,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Mm(),window[ey+this.uniqueCallbackIdentifier]=e,window[ty+this.uniqueCallbackIdentifier]=n,this.myIFrame=qo.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ie("frame writing exception"),l.stack&&Ie(l.stack),Ie(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ie("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fh]=this.myID,e[dh]=this.myPW,e[ph]=this.currentSerial;let n=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gh+s.length<=_h;){const o=this.pendingSegs.shift();s=s+"&"+sy+i+"="+o.seg+"&"+iy+i+"="+o.ts+"&"+ry+i+"="+o.d,i++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(s,Math.floor(ay)),r=()=>{clearTimeout(i),s()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Ie("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}const uy=16384,hy=45e3;let bi=null;typeof MozWebSocket<"u"?bi=MozWebSocket:typeof WebSocket<"u"&&(bi=WebSocket);class Ze{constructor(e,n,s,i,r,o,l){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$s(this.connId),this.stats_=Go(n),this.connURL=Ze.connectionURL_(n,o,l,i,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,i,r){const o={};return o[th]=$o,typeof location<"u"&&location.hostname&&rh.test(location.hostname)&&(o[sh]=ih),n&&(o[nh]=n),s&&(o[oh]=s),i&&(o[io]=i),r&&(o[lh]=r),hh(e,ah,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hn.set("previous_websocket_failure",!0);try{let s;og(),this.mySock=new bi(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ze.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&bi!==null&&!Ze.forceDisallow_}static previouslyFailed(){return hn.isInMemoryStorage||hn.get("previous_websocket_failure")===!0}markConnectionHealthy(){hn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=As(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=we(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Zu(n,uy);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hy))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ze.responsesRequiredToBeHealthy=2;Ze.healthyTimeout=3e4;class Os{static get ALL_TRANSPORTS(){return[Rn,Ze]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Ze&&Ze.isAvailable();let s=n&&!Ze.previouslyFailed();if(e.webSocketOnly&&(n||Le("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{const i=this.transports_=[];for(const r of Os.ALL_TRANSPORTS)r&&r.isAvailable()&&i.push(r);Os.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Os.globalTransportInitialized_=!1;const fy=6e4,dy=5e3,py=10*1024,_y=100*1024,Rr="t",Ba="d",gy="s",Ha="r",my="e",Ua="o",Wa="a",Va="n",ja="p",yy="h";class vy{constructor(e,n,s,i,r,o,l,a,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$s("c:"+this.id+":"),this.transportManager_=new Os(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=vs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_y?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>py?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Rr in e){const n=e[Rr];n===Wa?this.upgradeIfSecondaryHealthy_():n===Ha?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ua&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ns("t",e),s=ns("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ja,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wa,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Va,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ns("t",e),s=ns("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ns(Rr,e);if(Ba in e){const s=e[Ba];if(n===yy){const i={...s};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Va){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===gy?this.onConnectionShutdown_(s):n===Ha?this.onReset_(s):n===my?so("Server Error: "+s):n===Ua?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):so("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),$o!==s&&Le("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),vs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fy))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dy))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ja,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mh{put(e,n,s,i){}merge(e,n,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}class yh{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const i=this.getInitialEvent(e);i&&n.apply(s,i)}off(e,n,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===n&&(!s||s===i[r].context)){i.splice(r,1);return}}validateEventType_(e){S(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Ci extends yh{static getInstance(){return new Ci}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Wu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return S(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const $a=32,Ga=768;class ne{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Y(){return new ne("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jt(t){return t.pieces_.length-t.pieceNum_}function ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ne(t.pieces_,e)}function Ko(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function by(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ds(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vh(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ne(e,0)}function _e(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof ne)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&n.push(s[i])}return new ne(n,0)}function q(t){return t.pieceNum_>=t.pieces_.length}function Ve(t,e){const n=$(t),s=$(e);if(n===null)return e;if(n===s)return Ve(ue(t),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Cy(t,e){const n=Ds(t,0),s=Ds(e,0);for(let i=0;i<n.length&&i<s.length;i++){const r=yn(n[i],s[i]);if(r!==0)return r}return n.length===s.length?0:n.length<s.length?-1:1}function zo(t,e){if(Jt(t)!==Jt(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Qe(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Jt(t)>Jt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class Ey{constructor(e,n){this.errorPrefix_=n,this.parts_=Ds(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Yi(this.parts_[s]);bh(this)}}function wy(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Yi(e),bh(t)}function Sy(t){const e=t.parts_.pop();t.byteLength_-=Yi(e),t.parts_.length>0&&(t.byteLength_-=1)}function bh(t){if(t.byteLength_>Ga)throw new Error(t.errorPrefix_+"has a key path longer than "+Ga+" bytes ("+t.byteLength_+").");if(t.parts_.length>$a)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$a+") or object contains a cycle "+cn(t))}function cn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}class Yo extends yh{static getInstance(){return new Yo}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return S(e==="visible","Unknown event type: "+e),[this.visible_]}}const ss=1e3,Iy=300*1e3,qa=30*1e3,Ty=1.3,xy=3e4,Ry="server_kill",Ka=3;class At extends mh{constructor(e,n,s,i,r,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=At.nextPersistentConnectionId_++,this.log_=$s("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ss,this.maxReconnectDelay_=Iy,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yo.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ci.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const i=++this.requestNumber_,r={r:i,a:e,b:n};this.log_(we(r)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const n=new Us,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:s};this.listens.get(o).set(r,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,l=>{const a=l.d,c=l.s;At.warnOnListenWarnings_(a,n),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(c,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&vt(e,"w")){const s=Wn(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();Le(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||dg(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qa)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=fg(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,i=>{const r=i.s,o=i.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,n)}sendUnlisten_(e,n,s,i){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";i&&(r.q=s,r.t=i),this.sendRequest(o,r)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,i){const r={p:n,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,s,i){this.putInternal("p",e,n,s,i)}merge(e,n,s,i){this.putInternal("m",e,n,s,i)}putInternal(e,n,s,i,r){this.initConnection_();const o={p:n,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+we(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):so("Unrecognized action received from server: "+we(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>xy&&(this.reconnectDelay_=ss),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ty)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+At.nextConnectionId_++,r=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,s())},c=function(h){S(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:a,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Ie("getToken() completed but was canceled"):(Ie("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new vy(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,p=>{Le(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ry)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Le(h),a())}}}interrupt(e){Ie("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ie("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ea(this.interruptReasons_)&&(this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(r=>jo(r)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const s=new ne(e).toString();let i;if(this.listens.has(s)){const r=this.listens.get(s);i=r.get(n),r.delete(n),r.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,n){Ie("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ka&&(this.reconnectDelay_=qa,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ie("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ka&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Qu.replace(/\./g,"-")]=1,Wu()?e["framework.cordova"]=1:rg()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ci.getInstance().currentlyOnline();return Ea(this.interruptReasons_)&&e}}At.nextPersistentConnectionId_=0;At.nextConnectionId_=0;class G{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new G(e,n)}}class Qi{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new G(Vn,e),i=new G(Vn,n);return this.compare(s,i)!==0}minPost(){return G.MIN}}let Xs;class Ch extends Qi{static get __EMPTY_NODE(){return Xs}static set __EMPTY_NODE(e){Xs=e}compare(e,n){return yn(e.name,n.name)}isDefinedOn(e){throw Kn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return G.MIN}maxPost(){return new G(pn,Xs)}makePost(e,n){return S(typeof e=="string","KeyIndex indexValue must always be a string."),new G(e,Xs)}toString(){return".key"}}const Mn=new Ch;class Zs{constructor(e,n,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ce{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??Ce.RED,this.left=i??je.EMPTY_NODE,this.right=r??je.EMPTY_NODE}copy(e,n,s,i,r){return new Ce(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return r<0?i=i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return je.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,i;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return je.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ce.RED=!0;Ce.BLACK=!1;class Ay{copy(e,n,s,i,r){return this}insert(e,n,s){return new Ce(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class je{constructor(e,n=je.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new je(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ce.BLACK,null,null))}remove(e){return new je(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ce.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,i=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zs(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Zs(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Zs(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Zs(this.root_,null,this.comparator_,!0,e)}}je.EMPTY_NODE=new Ay;function Ny(t,e){return yn(t.name,e.name)}function Qo(t,e){return yn(t,e)}let ro;function Py(t){ro=t}const Eh=function(t){return typeof t=="number"?"number:"+eh(t):"string:"+t},wh=function(t){if(t.isLeafNode()){const e=t.val();S(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vt(e,".sv"),"Priority must be a string or number.")}else S(t===ro||t.isEmpty(),"priority of unexpected type.");S(t===ro||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let za;class be{static set __childrenNodeConstructor(e){za=e}static get __childrenNodeConstructor(){return za}constructor(e,n=be.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wh(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new be(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:be.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return q(e)?this:$(e)===".priority"?this.priorityNode_:be.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:be.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=$(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(S(s!==".priority"||Jt(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,be.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Eh(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=eh(this.value_):e+=this.value_,this.lazyHash_=Xu(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===be.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof be.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,i=be.VALUE_TYPE_ORDER.indexOf(n),r=be.VALUE_TYPE_ORDER.indexOf(s);return S(i>=0,"Unknown leaf type: "+n),S(r>=0,"Unknown leaf type: "+s),i===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}be.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Sh,Ih;function Oy(t){Sh=t}function Dy(t){Ih=t}class ky extends Qi{compare(e,n){const s=e.node.getPriority(),i=n.node.getPriority(),r=s.compareTo(i);return r===0?yn(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(pn,new be("[PRIORITY-POST]",Ih))}makePost(e,n){const s=Sh(e);return new G(n,new be("[PRIORITY-POST]",s))}toString(){return".priority"}}const ge=new ky;const My=Math.log(2);class Ly{constructor(e){const n=r=>parseInt(Math.log(r)/My,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ei=function(t,e,n,s){t.sort(e);const i=function(a,c){const u=c-a;let h,f;if(u===0)return null;if(u===1)return h=t[a],f=n?n(h):h,new Ce(f,h.node,Ce.BLACK,null,null);{const p=parseInt(u/2,10)+a,m=i(a,p),y=i(p+1,c);return h=t[p],f=n?n(h):h,new Ce(f,h.node,Ce.BLACK,m,y)}},r=function(a){let c=null,u=null,h=t.length;const f=function(m,y){const R=h-m,x=h;h-=m;const O=i(R+1,x),L=t[R],M=n?n(L):L;p(new Ce(M,L.node,y,null,O))},p=function(m){c?(c.left=m,c=m):(u=m,c=m)};for(let m=0;m<a.count;++m){const y=a.nextBitIsOne(),R=Math.pow(2,a.count-(m+1));y?f(R,Ce.BLACK):(f(R,Ce.BLACK),f(R,Ce.RED))}return u},o=new Ly(t.length),l=r(o);return new je(s||e,l)};let Ar;const Sn={};class xt{static get Default(){return S(Sn&&ge,"ChildrenNode.ts has not been loaded"),Ar=Ar||new xt({".priority":Sn},{".priority":ge}),Ar}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Wn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof je?n:null}hasIndex(e){return vt(this.indexSet_,e.toString())}addIndex(e,n){S(e!==Mn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=n.getIterator(G.Wrap);let o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),s.push(o),o=r.getNext();let l;i?l=Ei(s,e.getCompare()):l=Sn;const a=e.toString(),c={...this.indexSet_};c[a]=e;const u={...this.indexes_};return u[a]=l,new xt(u,c)}addToIndexes(e,n){const s=gi(this.indexes_,(i,r)=>{const o=Wn(this.indexSet_,r);if(S(o,"Missing index implementation for "+r),i===Sn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(G.Wrap);let c=a.getNext();for(;c;)c.name!==e.name&&l.push(c),c=a.getNext();return l.push(e),Ei(l,o.getCompare())}else return Sn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new G(e.name,l))),a.insert(e,e.node)}});return new xt(s,this.indexSet_)}removeFromIndexes(e,n){const s=gi(this.indexes_,i=>{if(i===Sn)return i;{const r=n.get(e.name);return r?i.remove(new G(e.name,r)):i}});return new xt(s,this.indexSet_)}}let is;class U{static get EMPTY_NODE(){return is||(is=new U(new je(Qo),null,xt.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&wh(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||is}updatePriority(e){return this.children_.isEmpty()?this:new U(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?is:n}}getChild(e){const n=$(e);return n===null?this:this.getImmediateChild(n).getChild(ue(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(S(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new G(e,n);let i,r;n.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(s,this.children_));const o=i.isEmpty()?is:this.priorityNode_;return new U(i,o,r)}}updateChild(e,n){const s=$(e);if(s===null)return n;{S($(e)!==".priority"||Jt(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(ue(e),n);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,i=0,r=!0;if(this.forEachChild(ge,(o,l)=>{n[o]=l.val(e),s++,r&&U.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1}),!e&&r&&i<2*s){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Eh(this.getPriority().val())+":"),this.forEachChild(ge,(n,s)=>{const i=s.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Xu(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const i=this.resolveIndex_(s);if(i){const r=i.getPredecessorKey(new G(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new G(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new G(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,G.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)<0;)i.getNext(),r=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,G.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)>0;)i.getNext(),r=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gs?-1:0}withIndex(e){if(e===Mn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new U(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Mn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(ge),i=n.getIterator(ge);let r=s.getNext(),o=i.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=i.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Mn?null:this.indexMap_.get(e.toString())}}U.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Fy extends U{constructor(){super(new je(Qo),U.EMPTY_NODE,xt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return U.EMPTY_NODE}isEmpty(){return!1}}const Gs=new Fy;Object.defineProperties(G,{MIN:{value:new G(Vn,U.EMPTY_NODE)},MAX:{value:new G(pn,Gs)}});Ch.__EMPTY_NODE=U.EMPTY_NODE;be.__childrenNodeConstructor=U;Py(Gs);Dy(Gs);const By=!0;function Ee(t,e=null){if(t===null)return U.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),S(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new be(n,Ee(e))}if(!(t instanceof Array)&&By){const n=[];let s=!1;if(xe(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=Ee(l);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new G(o,a)))}}),n.length===0)return U.EMPTY_NODE;const r=Ei(n,Ny,o=>o.name,Qo);if(s){const o=Ei(n,ge.getCompare());return new U(r,Ee(e),new xt({".priority":o},{".priority":ge}))}else return new U(r,Ee(e),xt.Default)}else{let n=U.EMPTY_NODE;return xe(t,(s,i)=>{if(vt(t,s)&&s.substring(0,1)!=="."){const r=Ee(i);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(s,r))}}),n.updatePriority(Ee(e))}}Oy(Ee);class Hy extends Qi{constructor(e){super(),this.indexPath_=e,S(!q(e)&&$(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),i=this.extractChild(n.node),r=s.compareTo(i);return r===0?yn(e.name,n.name):r}makePost(e,n){const s=Ee(e),i=U.EMPTY_NODE.updateChild(this.indexPath_,s);return new G(n,i)}maxPost(){const e=U.EMPTY_NODE.updateChild(this.indexPath_,Gs);return new G(pn,e)}toString(){return Ds(this.indexPath_,0).join("/")}}class Uy extends Qi{compare(e,n){const s=e.node.compareTo(n.node);return s===0?yn(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(e,n){const s=Ee(e);return new G(n,s)}toString(){return".value"}}const Wy=new Uy;function Th(t){return{type:"value",snapshotNode:t}}function jn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ks(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ms(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Vy(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}class Jo{constructor(e){this.index_=e}updateChild(e,n,s,i,r,o){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(s.getChild(i))&&l.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(ks(n,l)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(jn(n,s)):o.trackChildChange(Ms(n,s,l))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(ge,(i,r)=>{n.hasChild(i)||s.trackChildChange(ks(i,r))}),n.isLeafNode()||n.forEachChild(ge,(i,r)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(r)||s.trackChildChange(Ms(i,r,o))}else s.trackChildChange(jn(i,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?U.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ls{constructor(e){this.indexedFilter_=new Jo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ls.getStartPost_(e),this.endPost_=Ls.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,i,r,o){return this.matches(new G(n,s))||(s=U.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,i,r,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=U.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(U.EMPTY_NODE);const r=this;return n.forEachChild(ge,(o,l)=>{r.matches(new G(o,l))||(i=i.updateImmediateChild(o,U.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}class jy{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ls(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,i,r,o){return this.rangedFilter_.matches(new G(n,s))||(s=U.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,i,r,o):this.fullLimitUpdateChild_(e,n,s,r,o)}updateFullNode(e,n,s){let i;if(n.isLeafNode()||n.isEmpty())i=U.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=U.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const l=r.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(U.EMPTY_NODE);let r;this.reverse_?r=i.getReverseIterator(this.index_):r=i.getIterator(this.index_);let o=0;for(;r.hasNext();){const l=r.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,U.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,i,r){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const l=e;S(l.numChildren()===this.limit_,"");const a=new G(n,s),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(l.hasChild(n)){const h=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,a);if(u&&!s.isEmpty()&&p>=0)return r?.trackChildChange(Ms(n,s,h)),l.updateImmediateChild(n,s);{r?.trackChildChange(ks(n,h));const y=l.updateImmediateChild(n,U.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(r?.trackChildChange(jn(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return s.isEmpty()?e:u&&o(c,a)>=0?(r!=null&&(r.trackChildChange(ks(c.name,c.node)),r.trackChildChange(jn(n,s))),l.updateImmediateChild(n,s).updateImmediateChild(c.name,U.EMPTY_NODE)):e}}class Xo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vn}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ge}copy(){const e=new Xo;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $y(t){return t.loadsAllData()?new Jo(t.getIndex()):t.hasLimit()?new jy(t):new Ls(t)}function Ya(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ge?n="$priority":t.index_===Wy?n="$value":t.index_===Mn?n="$key":(S(t.index_ instanceof Hy,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=we(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=we(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+we(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=we(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+we(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Qa(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ge&&(e.i=t.index_.toString()),e}class wi extends mh{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=$s("p:rest:"),this.listens_={}}listen(e,n,s,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=wi.getListenId_(e,s),l={};this.listens_[o]=l;const a=Ya(e._queryParams);this.restRequest_(r+".json",a,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,s),Wn(this.listens_,o)===l){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,n){const s=wi.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Ya(e._queryParams),s=e._path.toString(),i=new Us;return this.restRequest_(s+".json",n,(r,o)=>{let l=o;r===404&&(l=null,r=null),r===null?(this.onDataUpdate_(s,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(n.auth=i.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pg(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(s&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=As(l.responseText)}catch{Le("Failed to parse JSON response for "+o+": "+l.responseText)}s(null,a)}else l.status!==401&&l.status!==404&&Le("Got unsuccessful REST response for "+o+" Status: "+l.status),s(l.status);s=null}},l.open("GET",o,!0),l.send()})}}class Gy{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function Si(){return{value:null,children:new Map}}function xh(t,e,n){if(q(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=$(e);t.children.has(s)||t.children.set(s,Si());const i=t.children.get(s);e=ue(e),xh(i,e,n)}}function oo(t,e,n){t.value!==null?n(e,t.value):qy(t,(s,i)=>{const r=new ne(e.toString()+"/"+s);oo(i,r,n)})}function qy(t,e){t.children.forEach((n,s)=>{e(s,n)})}class Ky{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&xe(this.last_,(s,i)=>{n[s]=n[s]-i}),this.last_=e,n}}const Ja=10*1e3,zy=30*1e3,Yy=300*1e3;class Qy{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Ky(e);const s=Ja+(zy-Ja)*Math.random();vs(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;xe(e,(i,r)=>{r>0&&vt(this.statsToReport_,i)&&(n[i]=r,s=!0)}),s&&this.server_.reportStats(n),vs(this.reportStats_.bind(this),Math.floor(Math.random()*2*Yy))}}var et;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(et||(et={}));function Zo(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function el(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tl(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Ii{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=et.ACK_USER_WRITE,this.source=Zo()}operationForChild(e){if(q(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ne(e));return new Ii(Y(),n,this.revert)}}else return S($(this.path)===e,"operationForChild called for unrelated child."),new Ii(ue(this.path),this.affectedTree,this.revert)}}class Fs{constructor(e,n){this.source=e,this.path=n,this.type=et.LISTEN_COMPLETE}operationForChild(e){return q(this.path)?new Fs(this.source,Y()):new Fs(this.source,ue(this.path))}}class _n{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=et.OVERWRITE}operationForChild(e){return q(this.path)?new _n(this.source,Y(),this.snap.getImmediateChild(e)):new _n(this.source,ue(this.path),this.snap)}}class $n{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=et.MERGE}operationForChild(e){if(q(this.path)){const n=this.children.subtree(new ne(e));return n.isEmpty()?null:n.value?new _n(this.source,Y(),n.value):new $n(this.source,Y(),n)}else return S($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $n(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gn{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(q(e))return this.isFullyInitialized()&&!this.filtered_;const n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Jy{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Xy(t,e,n,s){const i=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(Vy(o.childName,o.snapshotNode))}),rs(t,i,"child_removed",e,s,n),rs(t,i,"child_added",e,s,n),rs(t,i,"child_moved",r,s,n),rs(t,i,"child_changed",e,s,n),rs(t,i,"value",e,s,n),i}function rs(t,e,n,s,i,r){const o=s.filter(l=>l.type===n);o.sort((l,a)=>ev(t,l,a)),o.forEach(l=>{const a=Zy(t,l,r);i.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(a,t.query_))})})}function Zy(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ev(t,e,n){if(e.childName==null||n.childName==null)throw Kn("Should only compare child_ events.");const s=new G(e.childName,e.snapshotNode),i=new G(n.childName,n.snapshotNode);return t.index_.compare(s,i)}function Ji(t,e){return{eventCache:t,serverCache:e}}function bs(t,e,n,s){return Ji(new gn(e,n,s),t.serverCache)}function Rh(t,e,n,s){return Ji(t.eventCache,new gn(e,n,s))}function lo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Nr;const tv=()=>(Nr||(Nr=new je(Hm)),Nr);class ae{static fromObject(e){let n=new ae(null);return xe(e,(s,i)=>{n=n.set(new ne(s),i)}),n}constructor(e,n=tv()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Y(),value:this.value};if(q(e))return null;{const s=$(e),i=this.children.get(s);if(i!==null){const r=i.findRootMostMatchingPathAndValue(ue(e),n);return r!=null?{path:_e(new ne(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(q(e))return this;{const n=$(e),s=this.children.get(n);return s!==null?s.subtree(ue(e)):new ae(null)}}set(e,n){if(q(e))return new ae(n,this.children);{const s=$(e),r=(this.children.get(s)||new ae(null)).set(ue(e),n),o=this.children.insert(s,r);return new ae(this.value,o)}}remove(e){if(q(e))return this.children.isEmpty()?new ae(null):new ae(null,this.children);{const n=$(e),s=this.children.get(n);if(s){const i=s.remove(ue(e));let r;return i.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,i),this.value===null&&r.isEmpty()?new ae(null):new ae(this.value,r)}else return this}}get(e){if(q(e))return this.value;{const n=$(e),s=this.children.get(n);return s?s.get(ue(e)):null}}setTree(e,n){if(q(e))return n;{const s=$(e),r=(this.children.get(s)||new ae(null)).setTree(ue(e),n);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new ae(this.value,o)}}fold(e){return this.fold_(Y(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((i,r)=>{s[i]=r.fold_(_e(e,i),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Y(),n)}findOnPath_(e,n,s){const i=this.value?s(n,this.value):!1;if(i)return i;if(q(e))return null;{const r=$(e),o=this.children.get(r);return o?o.findOnPath_(ue(e),_e(n,r),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Y(),n)}foreachOnPath_(e,n,s){if(q(e))return this;{this.value&&s(n,this.value);const i=$(e),r=this.children.get(i);return r?r.foreachOnPath_(ue(e),_e(n,i),s):new ae(null)}}foreach(e){this.foreach_(Y(),e)}foreach_(e,n){this.children.inorderTraversal((s,i)=>{i.foreach_(_e(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}class st{constructor(e){this.writeTree_=e}static empty(){return new st(new ae(null))}}function Cs(t,e,n){if(q(e))return new st(new ae(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let r=s.value;const o=Ve(i,e);return r=r.updateChild(o,n),new st(t.writeTree_.set(i,r))}else{const i=new ae(n),r=t.writeTree_.setTree(e,i);return new st(r)}}}function ao(t,e,n){let s=t;return xe(n,(i,r)=>{s=Cs(s,_e(e,i),r)}),s}function Xa(t,e){if(q(e))return st.empty();{const n=t.writeTree_.setTree(e,new ae(null));return new st(n)}}function co(t,e){return vn(t,e)!=null}function vn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ve(n.path,e)):null}function Za(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ge,(s,i)=>{e.push(new G(s,i))}):t.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new G(s,i.value))}),e}function Yt(t,e){if(q(e))return t;{const n=vn(t,e);return n!=null?new st(new ae(n)):new st(t.writeTree_.subtree(e))}}function uo(t){return t.writeTree_.isEmpty()}function Gn(t,e){return Ah(Y(),t.writeTree_,e)}function Ah(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((i,r)=>{i===".priority"?(S(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):n=Ah(_e(t,i),r,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(_e(t,".priority"),s)),n}}function nl(t,e){return Dh(e,t)}function nv(t,e,n,s,i){S(s>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:i}),i&&(t.visibleWrites=Cs(t.visibleWrites,e,n)),t.lastWriteId=s}function sv(t,e,n,s){S(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=ao(t.visibleWrites,e,n),t.lastWriteId=s}function iv(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function rv(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);S(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let i=s.visible,r=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&ov(l,s.path)?i=!1:Qe(s.path,l.path)&&(r=!0)),o--}if(i){if(r)return lv(t),!0;if(s.snap)t.visibleWrites=Xa(t.visibleWrites,s.path);else{const l=s.children;xe(l,a=>{t.visibleWrites=Xa(t.visibleWrites,_e(s.path,a))})}return!0}else return!1}function ov(t,e){if(t.snap)return Qe(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Qe(_e(t.path,n),e))return!0;return!1}function lv(t){t.visibleWrites=Nh(t.allWrites,av,Y()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function av(t){return t.visible}function Nh(t,e,n){let s=st.empty();for(let i=0;i<t.length;++i){const r=t[i];if(e(r)){const o=r.path;let l;if(r.snap)Qe(n,o)?(l=Ve(n,o),s=Cs(s,l,r.snap)):Qe(o,n)&&(l=Ve(o,n),s=Cs(s,Y(),r.snap.getChild(l)));else if(r.children){if(Qe(n,o))l=Ve(n,o),s=ao(s,l,r.children);else if(Qe(o,n))if(l=Ve(o,n),q(l))s=ao(s,Y(),r.children);else{const a=Wn(r.children,$(l));if(a){const c=a.getChild(ue(l));s=Cs(s,Y(),c)}}}else throw Kn("WriteRecord should have .snap or .children")}}return s}function Ph(t,e,n,s,i){if(!s&&!i){const r=vn(t.visibleWrites,e);if(r!=null)return r;{const o=Yt(t.visibleWrites,e);if(uo(o))return n;if(n==null&&!co(o,Y()))return null;{const l=n||U.EMPTY_NODE;return Gn(o,l)}}}else{const r=Yt(t.visibleWrites,e);if(!i&&uo(r))return n;if(!i&&n==null&&!co(r,Y()))return null;{const o=function(c){return(c.visible||i)&&(!s||!~s.indexOf(c.writeId))&&(Qe(c.path,e)||Qe(e,c.path))},l=Nh(t.allWrites,o,e),a=n||U.EMPTY_NODE;return Gn(l,a)}}}function cv(t,e,n){let s=U.EMPTY_NODE;const i=vn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ge,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(n){const r=Yt(t.visibleWrites,e);return n.forEachChild(ge,(o,l)=>{const a=Gn(Yt(r,new ne(o)),l);s=s.updateImmediateChild(o,a)}),Za(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=Yt(t.visibleWrites,e);return Za(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function uv(t,e,n,s,i){S(s||i,"Either existingEventSnap or existingServerSnap must exist");const r=_e(e,n);if(co(t.visibleWrites,r))return null;{const o=Yt(t.visibleWrites,r);return uo(o)?i.getChild(n):Gn(o,i.getChild(n))}}function hv(t,e,n,s){const i=_e(e,n),r=vn(t.visibleWrites,i);if(r!=null)return r;if(s.isCompleteForChild(n)){const o=Yt(t.visibleWrites,i);return Gn(o,s.getNode().getImmediateChild(n))}else return null}function fv(t,e){return vn(t.visibleWrites,e)}function dv(t,e,n,s,i,r,o){let l;const a=Yt(t.visibleWrites,e),c=vn(a,Y());if(c!=null)l=c;else if(n!=null)l=Gn(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const u=[],h=o.getCompare(),f=r?l.getReverseIteratorFrom(s,o):l.getIteratorFrom(s,o);let p=f.getNext();for(;p&&u.length<i;)h(p,s)!==0&&u.push(p),p=f.getNext();return u}else return[]}function pv(){return{visibleWrites:st.empty(),allWrites:[],lastWriteId:-1}}function Ti(t,e,n,s){return Ph(t.writeTree,t.treePath,e,n,s)}function sl(t,e){return cv(t.writeTree,t.treePath,e)}function ec(t,e,n,s){return uv(t.writeTree,t.treePath,e,n,s)}function xi(t,e){return fv(t.writeTree,_e(t.treePath,e))}function _v(t,e,n,s,i,r){return dv(t.writeTree,t.treePath,e,n,s,i,r)}function il(t,e,n){return hv(t.writeTree,t.treePath,e,n)}function Oh(t,e){return Dh(_e(t.treePath,e),t.writeTree)}function Dh(t,e){return{treePath:t,writeTree:e}}class gv{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;S(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),S(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(s,Ms(s,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(s,ks(s,i.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(s,jn(s,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(s,Ms(s,e.snapshotNode,i.oldSnap));else throw Kn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}class mv{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const kh=new mv;class rl{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new gn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return il(this.writes_,e,s)}}getChildAfterChild(e,n,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mn(this.viewCache_),r=_v(this.writes_,i,n,1,s,e);return r.length===0?null:r[0]}}function yv(t){return{filter:t}}function vv(t,e){S(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function bv(t,e,n,s,i){const r=new gv;let o,l;if(n.type===et.OVERWRITE){const c=n;c.source.fromUser?o=ho(t,e,c.path,c.snap,s,i,r):(S(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!q(c.path),o=Ri(t,e,c.path,c.snap,s,i,l,r))}else if(n.type===et.MERGE){const c=n;c.source.fromUser?o=Ev(t,e,c.path,c.children,s,i,r):(S(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),o=fo(t,e,c.path,c.children,s,i,l,r))}else if(n.type===et.ACK_USER_WRITE){const c=n;c.revert?o=Iv(t,e,c.path,s,i,r):o=wv(t,e,c.path,c.affectedTree,s,i,r)}else if(n.type===et.LISTEN_COMPLETE)o=Sv(t,e,n.path,s,r);else throw Kn("Unknown operation type: "+n.type);const a=r.getChanges();return Cv(e,o,a),{viewCache:o,changes:a}}function Cv(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=lo(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&n.push(Th(lo(e)))}}function Mh(t,e,n,s,i,r){const o=e.eventCache;if(xi(s,n)!=null)return e;{let l,a;if(q(n))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=mn(e),u=c instanceof U?c:U.EMPTY_NODE,h=sl(s,u);l=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=Ti(s,mn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=$(n);if(c===".priority"){S(Jt(n)===1,"Can't have a priority with additional path components");const u=o.getNode();a=e.serverCache.getNode();const h=ec(s,n,u,a);h!=null?l=t.filter.updatePriority(u,h):l=o.getNode()}else{const u=ue(n);let h;if(o.isCompleteForChild(c)){a=e.serverCache.getNode();const f=ec(s,n,o.getNode(),a);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=il(s,c,e.serverCache);h!=null?l=t.filter.updateChild(o.getNode(),c,h,u,i,r):l=o.getNode()}}return bs(e,l,o.isFullyInitialized()||q(n),t.filter.filtersNodes())}}function Ri(t,e,n,s,i,r,o,l){const a=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(q(n))c=u.updateFullNode(a.getNode(),s,null);else if(u.filtersNodes()&&!a.isFiltered()){const p=a.getNode().updateChild(n,s);c=u.updateFullNode(a.getNode(),p,null)}else{const p=$(n);if(!a.isCompleteForPath(n)&&Jt(n)>1)return e;const m=ue(n),R=a.getNode().getImmediateChild(p).updateChild(m,s);p===".priority"?c=u.updatePriority(a.getNode(),R):c=u.updateChild(a.getNode(),p,R,m,kh,null)}const h=Rh(e,c,a.isFullyInitialized()||q(n),u.filtersNodes()),f=new rl(i,h,r);return Mh(t,h,n,i,f,l)}function ho(t,e,n,s,i,r,o){const l=e.eventCache;let a,c;const u=new rl(i,e,r);if(q(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),a=bs(e,c,!0,t.filter.filtersNodes());else{const h=$(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),a=bs(e,c,l.isFullyInitialized(),l.isFiltered());else{const f=ue(n),p=l.getNode().getImmediateChild(h);let m;if(q(f))m=s;else{const y=u.getCompleteChild(h);y!=null?Ko(f)===".priority"&&y.getChild(vh(f)).isEmpty()?m=y:m=y.updateChild(f,s):m=U.EMPTY_NODE}if(p.equals(m))a=e;else{const y=t.filter.updateChild(l.getNode(),h,m,f,u,o);a=bs(e,y,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function tc(t,e){return t.eventCache.isCompleteForChild(e)}function Ev(t,e,n,s,i,r,o){let l=e;return s.foreach((a,c)=>{const u=_e(n,a);tc(e,$(u))&&(l=ho(t,l,u,c,i,r,o))}),s.foreach((a,c)=>{const u=_e(n,a);tc(e,$(u))||(l=ho(t,l,u,c,i,r,o))}),l}function nc(t,e,n){return n.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function fo(t,e,n,s,i,r,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,c;q(n)?c=s:c=new ae(null).setTree(n,s);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),m=nc(t,p,f);a=Ri(t,a,new ne(h),m,i,r,o,l)}}),c.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!p){const m=e.serverCache.getNode().getImmediateChild(h),y=nc(t,m,f);a=Ri(t,a,new ne(h),y,i,r,o,l)}}),a}function wv(t,e,n,s,i,r,o){if(xi(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(s.value!=null){if(q(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Ri(t,e,n,a.getNode().getChild(n),i,r,l,o);if(q(n)){let c=new ae(null);return a.getNode().forEachChild(Mn,(u,h)=>{c=c.set(new ne(u),h)}),fo(t,e,n,c,i,r,l,o)}else return e}else{let c=new ae(null);return s.foreach((u,h)=>{const f=_e(n,u);a.isCompleteForPath(f)&&(c=c.set(u,a.getNode().getChild(f)))}),fo(t,e,n,c,i,r,l,o)}}function Sv(t,e,n,s,i){const r=e.serverCache,o=Rh(e,r.getNode(),r.isFullyInitialized()||q(n),r.isFiltered());return Mh(t,o,n,s,kh,i)}function Iv(t,e,n,s,i,r){let o;if(xi(s,n)!=null)return e;{const l=new rl(s,e,i),a=e.eventCache.getNode();let c;if(q(n)||$(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ti(s,mn(e));else{const h=e.serverCache.getNode();S(h instanceof U,"serverChildren would be complete if leaf node"),u=sl(s,h)}u=u,c=t.filter.updateFullNode(a,u,r)}else{const u=$(n);let h=il(s,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=a.getImmediateChild(u)),h!=null?c=t.filter.updateChild(a,u,h,ue(n),l,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(a,u,U.EMPTY_NODE,ue(n),l,r):c=a,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ti(s,mn(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||xi(s,Y())!=null,bs(e,c,o,t.filter.filtersNodes())}}class Tv{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new Jo(s.getIndex()),r=$y(s);this.processor_=yv(r);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(U.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(U.EMPTY_NODE,l.getNode(),null),u=new gn(a,o.isFullyInitialized(),i.filtersNodes()),h=new gn(c,l.isFullyInitialized(),r.filtersNodes());this.viewCache_=Ji(h,u),this.eventGenerator_=new Jy(this.query_)}get query(){return this.query_}}function xv(t){return t.viewCache_.serverCache.getNode()}function Rv(t,e){const n=mn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!q(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function sc(t){return t.eventRegistrations_.length===0}function Av(t,e){t.eventRegistrations_.push(e)}function ic(t,e,n){const s=[];if(n){S(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,i);o&&s.push(o)})}if(e){let i=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return s}function rc(t,e,n,s){e.type===et.MERGE&&e.source.queryId!==null&&(S(mn(t.viewCache_),"We should always have a full cache before handling merges"),S(lo(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,r=bv(t.processor_,i,e,n,s);return vv(t.processor_,r.viewCache),S(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,Lh(t,r.changes,r.viewCache.eventCache.getNode(),null)}function Nv(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ge,(r,o)=>{s.push(jn(r,o))}),n.isFullyInitialized()&&s.push(Th(n.getNode())),Lh(t,s,n.getNode(),e)}function Lh(t,e,n,s){const i=s?[s]:t.eventRegistrations_;return Xy(t.eventGenerator_,e,n,i)}let Ai;class Pv{constructor(){this.views=new Map}}function Ov(t){S(!Ai,"__referenceConstructor has already been defined"),Ai=t}function Dv(){return S(Ai,"Reference.ts has not been loaded"),Ai}function kv(t){return t.views.size===0}function ol(t,e,n,s){const i=e.source.queryId;if(i!==null){const r=t.views.get(i);return S(r!=null,"SyncTree gave us an op for an invalid query."),rc(r,e,n,s)}else{let r=[];for(const o of t.views.values())r=r.concat(rc(o,e,n,s));return r}}function Mv(t,e,n,s,i){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let l=Ti(n,i?s:null),a=!1;l?a=!0:s instanceof U?(l=sl(n,s),a=!1):(l=U.EMPTY_NODE,a=!1);const c=Ji(new gn(l,a,!1),new gn(s,i,!1));return new Tv(e,c)}return o}function Lv(t,e,n,s,i,r){const o=Mv(t,e,s,i,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Av(o,n),Nv(o,n)}function Fv(t,e,n,s){const i=e._queryIdentifier,r=[];let o=[];const l=Xt(t);if(i==="default")for(const[a,c]of t.views.entries())o=o.concat(ic(c,n,s)),sc(c)&&(t.views.delete(a),c.query._queryParams.loadsAllData()||r.push(c.query));else{const a=t.views.get(i);a&&(o=o.concat(ic(a,n,s)),sc(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||r.push(a.query)))}return l&&!Xt(t)&&r.push(new(Dv())(e._repo,e._path)),{removed:r,events:o}}function Fh(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Ln(t,e){let n=null;for(const s of t.views.values())n=n||Rv(s,e);return n}function Bh(t,e){if(e._queryParams.loadsAllData())return Xi(t);{const s=e._queryIdentifier;return t.views.get(s)}}function Hh(t,e){return Bh(t,e)!=null}function Xt(t){return Xi(t)!=null}function Xi(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Ni;function Bv(t){S(!Ni,"__referenceConstructor has already been defined"),Ni=t}function Hv(){return S(Ni,"Reference.ts has not been loaded"),Ni}let Uv=1;class oc{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ae(null),this.pendingWriteTree_=pv(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Uh(t,e,n,s,i){return nv(t.pendingWriteTree_,e,n,s,i),i?Yn(t,new _n(Zo(),e,n)):[]}function Wv(t,e,n,s){sv(t.pendingWriteTree_,e,n,s);const i=ae.fromObject(n);return Yn(t,new $n(Zo(),e,i))}function $t(t,e,n=!1){const s=iv(t.pendingWriteTree_,e);if(rv(t.pendingWriteTree_,e)){let r=new ae(null);return s.snap!=null?r=r.set(Y(),!0):xe(s.children,o=>{r=r.set(new ne(o),!0)}),Yn(t,new Ii(s.path,r,n))}else return[]}function Zi(t,e,n){return Yn(t,new _n(el(),e,n))}function Vv(t,e,n){const s=ae.fromObject(n);return Yn(t,new $n(el(),e,s))}function jv(t,e){return Yn(t,new Fs(el(),e))}function $v(t,e,n){const s=al(t,n);if(s){const i=cl(s),r=i.path,o=i.queryId,l=Ve(r,e),a=new Fs(tl(o),l);return ul(t,r,a)}else return[]}function po(t,e,n,s,i=!1){const r=e._path,o=t.syncPointTree_.get(r);let l=[];if(o&&(e._queryIdentifier==="default"||Hh(o,e))){const a=Fv(o,e,n,s);kv(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=a.removed;if(l=a.events,!i){const u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(r,(f,p)=>Xt(p));if(u&&!h){const f=t.syncPointTree_.subtree(r);if(!f.isEmpty()){const p=Kv(f);for(let m=0;m<p.length;++m){const y=p[m],R=y.query,x=jh(t,y);t.listenProvider_.startListening(Es(R),Pi(t,R),x.hashFn,x.onComplete)}}}!h&&c.length>0&&!s&&(u?t.listenProvider_.stopListening(Es(e),null):c.forEach(f=>{const p=t.queryToTagMap.get(er(f));t.listenProvider_.stopListening(Es(f),p)}))}zv(t,c)}return l}function Gv(t,e,n,s){const i=al(t,s);if(i!=null){const r=cl(i),o=r.path,l=r.queryId,a=Ve(o,e),c=new _n(tl(l),a,n);return ul(t,o,c)}else return[]}function qv(t,e,n,s){const i=al(t,s);if(i){const r=cl(i),o=r.path,l=r.queryId,a=Ve(o,e),c=ae.fromObject(n),u=new $n(tl(l),a,c);return ul(t,o,u)}else return[]}function lc(t,e,n,s=!1){const i=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,p)=>{const m=Ve(f,i);r=r||Ln(p,m),o=o||Xt(p)});let l=t.syncPointTree_.get(i);l?(o=o||Xt(l),r=r||Ln(l,Y())):(l=new Pv,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;r!=null?a=!0:(a=!1,r=U.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,m)=>{const y=Ln(m,Y());y&&(r=r.updateImmediateChild(p,y))}));const c=Hh(l,e);if(!c&&!e._queryParams.loadsAllData()){const f=er(e);S(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=Yv();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const u=nl(t.pendingWriteTree_,i);let h=Lv(l,e,n,u,r,a);if(!c&&!o&&!s){const f=Bh(l,e);h=h.concat(Qv(t,e,f))}return h}function ll(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Ve(o,e),c=Ln(l,a);if(c)return c});return Ph(i,e,r,n,!0)}function Yn(t,e){return Wh(e,t.syncPointTree_,null,nl(t.pendingWriteTree_,Y()))}function Wh(t,e,n,s){if(q(t.path))return Vh(t,e,n,s);{const i=e.get(Y());n==null&&i!=null&&(n=Ln(i,Y()));let r=[];const o=$(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const c=n?n.getImmediateChild(o):null,u=Oh(s,o);r=r.concat(Wh(l,a,c,u))}return i&&(r=r.concat(ol(i,t,s,n))),r}}function Vh(t,e,n,s){const i=e.get(Y());n==null&&i!=null&&(n=Ln(i,Y()));let r=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,c=Oh(s,o),u=t.operationForChild(o);u&&(r=r.concat(Vh(u,l,a,c)))}),i&&(r=r.concat(ol(i,t,s,n))),r}function jh(t,e){const n=e.query,s=Pi(t,n);return{hashFn:()=>(xv(e)||U.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return s?$v(t,n._path,s):jv(t,n._path);{const r=Vm(i,n);return po(t,n,null,r)}}}}function Pi(t,e){const n=er(e);return t.queryToTagMap.get(n)}function er(t){return t._path.toString()+"$"+t._queryIdentifier}function al(t,e){return t.tagToQueryMap.get(e)}function cl(t){const e=t.indexOf("$");return S(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ne(t.substr(0,e))}}function ul(t,e,n){const s=t.syncPointTree_.get(e);S(s,"Missing sync point for query tag that we're tracking");const i=nl(t.pendingWriteTree_,e);return ol(s,n,i,null)}function Kv(t){return t.fold((e,n,s)=>{if(n&&Xt(n))return[Xi(n)];{let i=[];return n&&(i=Fh(n)),xe(s,(r,o)=>{i=i.concat(o)}),i}})}function Es(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Hv())(t._repo,t._path):t}function zv(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const i=er(s),r=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(r)}}}function Yv(){return Uv++}function Qv(t,e,n){const s=e._path,i=Pi(t,e),r=jh(t,n),o=t.listenProvider_.startListening(Es(e),i,r.hashFn,r.onComplete),l=t.syncPointTree_.subtree(s);if(i)S(!Xt(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((c,u,h)=>{if(!q(c)&&u&&Xt(u))return[Xi(u).query];{let f=[];return u&&(f=f.concat(Fh(u).map(p=>p.query))),xe(h,(p,m)=>{f=f.concat(m)}),f}});for(let c=0;c<a.length;++c){const u=a[c];t.listenProvider_.stopListening(Es(u),Pi(t,u))}}return o}class hl{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new hl(n)}node(){return this.node_}}class fl{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=_e(this.path_,e);return new fl(this.syncTree_,n)}node(){return ll(this.syncTree_,this.path_)}}const Jv=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ac=function(t,e,n){if(!t||typeof t!="object")return t;if(S(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Xv(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Zv(t[".sv"],e);S(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Xv=function(t,e,n){if(t==="timestamp")return n.timestamp;S(!1,"Unexpected server value: "+t)},Zv=function(t,e,n){t.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&S(!1,"Unexpected increment value: "+s);const i=e.node();if(S(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const o=i.getValue();return typeof o!="number"?s:o+s},$h=function(t,e,n,s){return dl(e,new fl(n,t),s)},Gh=function(t,e,n){return dl(t,new hl(e),n)};function dl(t,e,n){const s=t.getPriority().val(),i=ac(s,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,l=ac(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new be(l,Ee(i)):t}else{const o=t;return r=o,i!==o.getPriority().val()&&(r=r.updatePriority(new be(i))),o.forEachChild(ge,(l,a)=>{const c=dl(a,e.getImmediateChild(l),n);c!==a&&(r=r.updateImmediateChild(l,c))}),r}}class pl{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function _l(t,e){let n=e instanceof ne?e:new ne(e),s=t,i=$(n);for(;i!==null;){const r=Wn(s.node.children,i)||{children:{},childCount:0};s=new pl(i,s,r),n=ue(n),i=$(n)}return s}function Qn(t){return t.node.value}function qh(t,e){t.node.value=e,_o(t)}function Kh(t){return t.node.childCount>0}function eb(t){return Qn(t)===void 0&&!Kh(t)}function tr(t,e){xe(t.node.children,(n,s)=>{e(new pl(n,t,s))})}function zh(t,e,n,s){n&&e(t),tr(t,i=>{zh(i,e,!0)})}function tb(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function qs(t){return new ne(t.parent===null?t.name:qs(t.parent)+"/"+t.name)}function _o(t){t.parent!==null&&nb(t.parent,t.name,t)}function nb(t,e,n){const s=eb(n),i=vt(t.node.children,e);s&&i?(delete t.node.children[e],t.node.childCount--,_o(t)):!s&&!i&&(t.node.children[e]=n.node,t.node.childCount++,_o(t))}const sb=/[\[\].#$\/\u0000-\u001F\u007F]/,ib=/[\[\].#$\u0000-\u001F\u007F]/,Pr=10*1024*1024,gl=function(t){return typeof t=="string"&&t.length!==0&&!sb.test(t)},Yh=function(t){return typeof t=="string"&&t.length!==0&&!ib.test(t)},rb=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Yh(t)},ob=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Vo(t)||t&&typeof t=="object"&&vt(t,".sv")},lb=function(t,e,n,s){nr(zi(t,"value"),e,n)},nr=function(t,e,n){const s=n instanceof ne?new Ey(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+cn(s));if(typeof e=="function")throw new Error(t+"contains a function "+cn(s)+" with contents = "+e.toString());if(Vo(e))throw new Error(t+"contains "+e.toString()+" "+cn(s));if(typeof e=="string"&&e.length>Pr/3&&Yi(e)>Pr)throw new Error(t+"contains a string greater than "+Pr+" utf8 bytes "+cn(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,r=!1;if(xe(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!gl(o)))throw new Error(t+" contains an invalid key ("+o+") "+cn(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wy(s,o),nr(t,l,s),Sy(s)}),i&&r)throw new Error(t+' contains ".value" child '+cn(s)+" in addition to actual children.")}},ab=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const r=Ds(s);for(let o=0;o<r.length;o++)if(!(r[o]===".priority"&&o===r.length-1)){if(!gl(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Cy);let i=null;for(n=0;n<e.length;n++){if(s=e[n],i!==null&&Qe(i,s))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+s.toString());i=s}},cb=function(t,e,n,s){const i=zi(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const r=[];xe(e,(o,l)=>{const a=new ne(o);if(nr(i,l,_e(n,a)),Ko(a)===".priority"&&!ob(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(a)}),ab(i,r)},Qh=function(t,e,n,s){if(!Yh(n))throw new Error(zi(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ub=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Qh(t,e,n)},hb=function(t,e){if($(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},fb=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gl(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!rb(n))throw new Error(zi(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class db{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sr(t,e){let n=null;for(let s=0;s<e.length;s++){const i=e[s],r=i.getPath();n!==null&&!zo(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(i)}n&&t.eventLists_.push(n)}function Jh(t,e,n){sr(t,n),Xh(t,s=>zo(s,e))}function ot(t,e,n){sr(t,n),Xh(t,s=>Qe(s,e)||Qe(e,s))}function Xh(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const i=t.eventLists_[s];if(i){const r=i.path;e(r)?(pb(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function pb(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();ys&&Ie("event: "+n.toString()),zn(s)}}}const _b="repo_interrupt",gb=25;class mb{constructor(e,n,s,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new db,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Si(),this.transactionQueueTree_=new pl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yb(t,e,n){if(t.stats_=Go(t.repoInfo_),t.forceRestClient_||qm())t.server_=new wi(t.repoInfo_,(s,i,r,o)=>{cc(t,s,i,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>uc(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{we(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new At(t.repoInfo_,e,(s,i,r,o)=>{cc(t,s,i,r,o)},s=>{uc(t,s)},s=>{bb(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=Jm(t.repoInfo_,()=>new Qy(t.stats_,t.server_)),t.infoData_=new Gy,t.infoSyncTree_=new oc({startListening:(s,i,r,o)=>{let l=[];const a=t.infoData_.getNode(s._path);return a.isEmpty()||(l=Zi(t.infoSyncTree_,s._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),ml(t,"connected",!1),t.serverSyncTree_=new oc({startListening:(s,i,r,o)=>(t.server_.listen(s,r,i,(l,a)=>{const c=o(l,a);ot(t.eventQueue_,s._path,c)}),[]),stopListening:(s,i)=>{t.server_.unlisten(s,i)}})}function vb(t){const n=t.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ir(t){return Jv({timestamp:vb(t)})}function cc(t,e,n,s,i){t.dataUpdateCount++;const r=new ne(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(s){const a=gi(n,c=>Ee(c));o=qv(t.serverSyncTree_,r,a,i)}else{const a=Ee(n);o=Gv(t.serverSyncTree_,r,a,i)}else if(s){const a=gi(n,c=>Ee(c));o=Vv(t.serverSyncTree_,r,a)}else{const a=Ee(n);o=Zi(t.serverSyncTree_,r,a)}let l=r;o.length>0&&(l=qn(t,r)),ot(t.eventQueue_,l,o)}function uc(t,e){ml(t,"connected",e),e===!1&&wb(t)}function bb(t,e){xe(e,(n,s)=>{ml(t,n,s)})}function ml(t,e,n){const s=new ne("/.info/"+e),i=Ee(n);t.infoData_.updateSnapshot(s,i);const r=Zi(t.infoSyncTree_,s,i);ot(t.eventQueue_,s,r)}function yl(t){return t.nextWriteId_++}function Cb(t,e,n,s,i){rr(t,"set",{path:e.toString(),value:n,priority:s});const r=ir(t),o=Ee(n,s),l=ll(t.serverSyncTree_,e),a=Gh(o,l,r),c=yl(t),u=Uh(t.serverSyncTree_,e,a,c,!0);sr(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(f,p)=>{const m=f==="ok";m||Le("set at "+e+" failed: "+f);const y=$t(t.serverSyncTree_,c,!m);ot(t.eventQueue_,e,y),go(t,i,f,p)});const h=bl(t,e);qn(t,h),ot(t.eventQueue_,h,[])}function Eb(t,e,n,s){rr(t,"update",{path:e.toString(),value:n});let i=!0;const r=ir(t),o={};if(xe(n,(l,a)=>{i=!1,o[l]=$h(_e(e,l),Ee(a),t.serverSyncTree_,r)}),i)Ie("update() called with empty data.  Don't do anything."),go(t,s,"ok",void 0);else{const l=yl(t),a=Wv(t.serverSyncTree_,e,o,l);sr(t.eventQueue_,a),t.server_.merge(e.toString(),n,(c,u)=>{const h=c==="ok";h||Le("update at "+e+" failed: "+c);const f=$t(t.serverSyncTree_,l,!h),p=f.length>0?qn(t,e):e;ot(t.eventQueue_,p,f),go(t,s,c,u)}),xe(n,c=>{const u=bl(t,_e(e,c));qn(t,u)}),ot(t.eventQueue_,e,[])}}function wb(t){rr(t,"onDisconnectEvents");const e=ir(t),n=Si();oo(t.onDisconnect_,Y(),(i,r)=>{const o=$h(i,r,t.serverSyncTree_,e);xh(n,i,o)});let s=[];oo(n,Y(),(i,r)=>{s=s.concat(Zi(t.serverSyncTree_,i,r));const o=bl(t,i);qn(t,o)}),t.onDisconnect_=Si(),ot(t.eventQueue_,Y(),s)}function Sb(t,e,n){let s;$(e._path)===".info"?s=lc(t.infoSyncTree_,e,n):s=lc(t.serverSyncTree_,e,n),Jh(t.eventQueue_,e._path,s)}function Ib(t,e,n){let s;$(e._path)===".info"?s=po(t.infoSyncTree_,e,n):s=po(t.serverSyncTree_,e,n),Jh(t.eventQueue_,e._path,s)}function Tb(t){t.persistentConnection_&&t.persistentConnection_.interrupt(_b)}function rr(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ie(n,...e)}function go(t,e,n,s){e&&zn(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let r=i;s&&(r+=": "+s);const o=new Error(r);o.code=i,e(o)}})}function Zh(t,e,n){return ll(t.serverSyncTree_,e,n)||U.EMPTY_NODE}function vl(t,e=t.transactionQueueTree_){if(e||or(t,e),Qn(e)){const n=tf(t,e);S(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&xb(t,qs(e),n)}else Kh(e)&&tr(e,n=>{vl(t,n)})}function xb(t,e,n){const s=n.map(c=>c.currentWriteId),i=Zh(t,e,s);let r=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];S(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Ve(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const l=r.val(!0),a=e;t.server_.put(a.toString(),l,c=>{rr(t,"transaction put response",{path:a.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat($t(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();or(t,_l(t.transactionQueueTree_,e)),vl(t,t.transactionQueueTree_),ot(t.eventQueue_,e,u);for(let f=0;f<h.length;f++)zn(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Le("transaction at "+a.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}qn(t,e)}},o)}function qn(t,e){const n=ef(t,e),s=qs(n),i=tf(t,n);return Rb(t,i,s),s}function Rb(t,e,n){if(e.length===0)return;const s=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],c=Ve(n,a.path);let u=!1,h;if(S(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,h=a.abortReason,i=i.concat($t(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=gb)u=!0,h="maxretry",i=i.concat($t(t.serverSyncTree_,a.currentWriteId,!0));else{const f=Zh(t,a.path,o);a.currentInputSnapshot=f;const p=e[l].update(f.val());if(p!==void 0){nr("transaction failed: Data returned ",p,a.path);let m=Ee(p);typeof p=="object"&&p!=null&&vt(p,".priority")||(m=m.updatePriority(f.getPriority()));const R=a.currentWriteId,x=ir(t),O=Gh(m,f,x);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=O,a.currentWriteId=yl(t),o.splice(o.indexOf(R),1),i=i.concat(Uh(t.serverSyncTree_,a.path,O,a.currentWriteId,a.applyLocally)),i=i.concat($t(t.serverSyncTree_,R,!0))}else u=!0,h="nodata",i=i.concat($t(t.serverSyncTree_,a.currentWriteId,!0))}ot(t.eventQueue_,n,i),i=[],u&&(e[l].status=2,(function(f){setTimeout(f,Math.floor(0))})(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?s.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):s.push(()=>e[l].onComplete(new Error(h),!1,null))))}or(t,t.transactionQueueTree_);for(let l=0;l<s.length;l++)zn(s[l]);vl(t,t.transactionQueueTree_)}function ef(t,e){let n,s=t.transactionQueueTree_;for(n=$(e);n!==null&&Qn(s)===void 0;)s=_l(s,n),e=ue(e),n=$(e);return s}function tf(t,e){const n=[];return nf(t,e,n),n.sort((s,i)=>s.order-i.order),n}function nf(t,e,n){const s=Qn(e);if(s)for(let i=0;i<s.length;i++)n.push(s[i]);tr(e,i=>{nf(t,i,n)})}function or(t,e){const n=Qn(e);if(n){let s=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[s]=n[i],s++);n.length=s,qh(e,n.length>0?n:void 0)}tr(e,s=>{or(t,s)})}function bl(t,e){const n=qs(ef(t,e)),s=_l(t.transactionQueueTree_,e);return tb(s,i=>{Or(t,i)}),Or(t,s),zh(s,i=>{Or(t,i)}),n}function Or(t,e){const n=Qn(e);if(n){const s=[];let i=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(S(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(S(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat($t(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?qh(e,void 0):n.length=r+1,ot(t.eventQueue_,qs(e),i);for(let o=0;o<s.length;o++)zn(s[o])}}function Ab(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let i=n[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Nb(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Le(`Invalid query segment '${n}' in query '${t}'`)}return e}const hc=function(t,e){const n=Pb(t),s=n.namespace;n.domain==="firebase.com"&&kt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&kt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Fm();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uh(n.host,n.secure,s,i,e,"",s!==n.subdomain),path:new ne(n.pathString)}},Pb=function(t){let e="",n="",s="",i="",r="",o=!0,l="https",a=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=Ab(t.substring(u,h)));const f=Nb(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const m=e.indexOf(".");s=e.substring(0,m).toLowerCase(),n=e.substring(m+1),r=s}"ns"in f&&(r=f.ns)}return{host:e,port:a,domain:n,subdomain:s,secure:o,scheme:l,pathString:i,namespace:r}};class Ob{constructor(e,n,s,i){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+we(this.snapshot.exportVal())}}class Db{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class kb{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Cl{constructor(e,n,s,i){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=i}get key(){return q(this._path)?null:Ko(this._path)}get ref(){return new tn(this._repo,this._path)}get _queryIdentifier(){const e=Qa(this._queryParams),n=jo(e);return n==="{}"?"default":n}get _queryObject(){return Qa(this._queryParams)}isEqual(e){if(e=Vs(e),!(e instanceof Cl))return!1;const n=this._repo===e._repo,s=zo(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+by(this._path)}}class tn extends Cl{constructor(e,n){super(e,n,new Xo,!1)}get parent(){const e=vh(this._path);return e===null?null:new tn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Oi{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ne(e),s=mo(this.ref,e);return new Oi(this._node.getChild(n),s,ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,i)=>e(new Oi(i,mo(this.ref,s),ge)))}hasChild(e){const n=new ne(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ks(t,e){return t=Vs(t),t._checkNotDeleted("ref"),e!==void 0?mo(t._root,e):t._root}function mo(t,e){return t=Vs(t),$(t._path)===null?ub("child","path",e):Qh("child","path",e),new tn(t._repo,_e(t._path,e))}function sf(t,e){t=Vs(t),hb("set",t._path),lb("set",e,t._path);const n=new Us;return Cb(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Mb(t,e){cb("update",e,t._path);const n=new Us;return Eb(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class El{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new Ob("value",this,new Oi(e.snapshotNode,new tn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Db(this,e,n):null}matches(e){return e instanceof El?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Lb(t,e,n,s,i){const r=new kb(n,void 0),o=new El(r);return Sb(t._repo,t,o),()=>Ib(t._repo,t,o)}function wl(t,e,n,s){return Lb(t,"value",e)}Ov(tn);Bv(tn);const Fb="FIREBASE_DATABASE_EMULATOR_HOST",yo={};let Bb=!1;function Hb(t,e,n,s){const i=e.lastIndexOf(":"),r=e.substring(0,i),o=Uo(r);t.repoInfo_=new uh(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function Ub(t,e,n,s,i){let r=s||t.options.databaseURL;r===void 0&&(t.options.projectId||kt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ie("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=hc(r,i),l=o.repoInfo,a;typeof process<"u"&&Oa&&(a=Oa[Fb]),a?(r=`http://${a}?ns=${l.namespace}`,o=hc(r,i),l=o.repoInfo):o.repoInfo.secure;const c=new zm(t.name,t.options,e);fb("Invalid Firebase Database URL",o),q(o.path)||kt("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Vb(l,t,c,new Km(t,n));return new jb(u,t)}function Wb(t,e){const n=yo[e];(!n||n[t.key]!==t)&&kt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Tb(t),delete n[t.key]}function Vb(t,e,n,s){let i=yo[e.name];i||(i={},yo[e.name]=i);let r=i[t.toURLString()];return r&&kt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new mb(t,Bb,n,s),i[t.toURLString()]=r,r}class jb{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yb(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new tn(this._repo,Y())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Wb(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&kt("Cannot call "+e+" on a deleted database.")}}function $b(t=ym(),e){const n=dm(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=X_("database");s&&Gb(n,...s)}return n}function Gb(t,e,n,s={}){t=Vs(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,r=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&mi(s,r.repoInfo_.emulatorOptions))return;kt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)s.mockUserToken&&kt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new oi(oi.OWNER);else if(s.mockUserToken){const l=typeof s.mockUserToken=="string"?s.mockUserToken:eg(s.mockUserToken,t.app.options.projectId);o=new oi(l)}Uo(e)&&(Z_(e),sg("Database",!0)),Hb(r,i,s,o)}function qb(t){Pm(mm),vi(new Ns("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return Ub(s,i,r,n)},"PUBLIC").setMultipleInstances(!0)),Dn(Da,ka,t),Dn(Da,ka,"esm2020")}At.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};At.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};qb();const Kb={apiKey:"AIzaSyBYw7M_886tHcr1PqqjUahYL5EeDi6negI",authDomain:"bloodborne-rpg.firebaseapp.com",projectId:"bloodborne-rpg",storageBucket:"bloodborne-rpg.firebasestorage.app",messagingSenderId:"1017592147059",appId:"1:1017592147059:web:4f0fe3352e54f3171c4e06",databaseURL:"https://bloodborne-rpg-default-rtdb.firebaseio.com/"},zb=Ku(Kb),zs=$b(zb),rf=(t,e)=>{const n=Ks(zs,`personagens/${t}`);return wl(n,s=>{const i=s.val();e(i)})},Yb=t=>{const e=Ks(zs,"personagens");return wl(e,n=>{t(n.val()||{})})},Dr=(t,e)=>Mb(Ks(zs,`personagens/${t}`),e),Qb=(t,e)=>sf(Ks(zs,`personagens/${t}`),e),of=Ks(zs,"combate"),lf=t=>wl(of,e=>{t(e.val()||{ativo:!1,ordem:[],turnoAtual:0})}),kr=t=>sf(of,t),Jb={class:"min-h-screen flex flex-col items-center justify-center p-6 bg-black relative overflow-hidden"},Xb={class:"relative z-10 w-full max-w-md flex flex-col items-center text-center"},Zb={class:"w-full bg-black/60 backdrop-blur-md p-8 border border-gray-800 shadow-2xl rounded"},eC={class:"space-y-6"},tC=["disabled"],nC={__name:"Login",setup(t){const e=U_(),n=Tt(""),s=Tt(!1),i=()=>e.push("/mestre"),r=()=>{if(!n.value)return;s.value=!0;const o=n.value.toLowerCase().trim().replace(/\s/g,"");rf(o,l=>{l||Qb(o,{nome:n.value,esperando:!0,status:[]}),s.value=!1,e.push(`/player/${o}`)})};return(o,l)=>(le(),fe("div",Jb,[l[4]||(l[4]=D("div",{class:"absolute inset-0 z-0 bg-[url('https://wallpapers.com/images/hd/bloodborne-phone-hunter-silhouette-red-moon-q4k7d5k7d5k7d5k7.jpg')] bg-cover bg-center opacity-30 grayscale-[50%]"},null,-1)),D("div",Xb,[l[2]||(l[2]=D("h1",{class:"text-6xl font-gothic text-blood font-bold tracking-tighter drop-shadow-[0_0_15px_rgba(138,11,11,0.8)] mb-2 w-full"}," BLOODBORNE ",-1)),l[3]||(l[3]=D("p",{class:"text-gold-dim font-gothic tracking-[0.4em] text-xs uppercase border-t border-gold-dim/30 pt-2 mb-12 inline-block"}," Tabletop Companion ",-1)),D("div",Zb,[D("div",eC,[D("div",null,[l[1]||(l[1]=D("label",{class:"block text-gold-dim text-xs uppercase tracking-widest mb-2"},"Quem  voc?",-1)),ti(D("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>n.value=a),onKeyup:wp(r,["enter"]),type:"text",class:"w-full bg-black/50 border-b border-gray-600 text-gray-200 text-center text-xl font-gothic py-2 focus:border-blood focus:outline-none transition-colors placeholder-gray-700",placeholder:"Seu Nome"},null,544),[[ri,n.value]])]),D("button",{onClick:r,disabled:s.value,class:"w-full bg-blood hover:bg-red-700 text-white py-4 font-gothic text-xl uppercase tracking-widest shadow-lg transition-all border border-white/10"},We(s.value?"Conectando...":"Entrar no Sonho"),9,tC)])]),D("div",{class:"mt-8"},[D("button",{onClick:i,class:"text-gray-600 hover:text-gold-dim text-xs font-gothic tracking-widest uppercase"}," Acessar como Mestre ")])])]))}},sC={key:0,class:"fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-sm border-t border-yharnam-border p-3 shadow-2xl z-50"},iC={class:"flex items-center justify-center gap-3 overflow-x-auto pb-2"},rC={__name:"InitiativeTracker",props:{combatState:Object,myId:String},setup(t){return(e,n)=>t.combatState&&t.combatState.ativo?(le(),fe("div",sC,[n[0]||(n[0]=D("h3",{class:"text-center text-xs font-gothic text-blood uppercase tracking-widest mb-2"},"Ordem de Combate",-1)),D("div",iC,[(le(!0),fe(Ae,null,os(t.combatState.ordem,(s,i)=>(le(),fe("div",{key:s.id,class:Rt(["p-2 rounded-md transition-all duration-300 w-32 flex-shrink-0",{"bg-gold/20 border-2 border-gold shadow-gold-glow scale-110":i===t.combatState.turnoAtual,"bg-yharnam-paper border border-yharnam-border":i!==t.combatState.turnoAtual,"ring-2 ring-blue-400":s.id===t.myId&&s.tipo==="jogador"}])},[D("div",{class:Rt(["text-center truncate font-gothic text-sm",{"text-gold":i===t.combatState.turnoAtual,"text-blue-300":s.tipo==="jogador","text-red-400":s.tipo==="monstro"}])},We(s.nome),3),D("div",{class:Rt(["text-center text-xs font-mono",{"text-white":i===t.combatState.turnoAtual,"text-gray-500":i!==t.combatState.turnoAtual}])}," Ini: "+We(s.iniciativa),3)],2))),128))])])):$r("",!0)}},oC={key:0,class:"min-h-screen flex flex-col items-center justify-center bg-yharnam-dark text-center p-6"},lC={class:"text-3xl font-gothic text-gold mb-4"},aC={class:"relative pt-8 pb-12 px-6 text-center bg-gradient-to-b from-black/80 to-transparent"},cC={class:"text-4xl md:text-5xl font-gothic text-transparent bg-clip-text bg-gradient-to-b from-gold to-gold-dim drop-shadow-lg tracking-widest uppercase"},uC={class:"max-w-md mx-auto px-4 space-y-8 relative z-10"},hC={class:"relative group"},fC={class:"flex justify-between text-gold-dim text-sm font-gothic mb-1 tracking-widest uppercase"},dC={class:"h-8 bg-black border border-yharnam-border rounded-sm relative overflow-hidden shadow-inner"},pC={key:1,class:"min-h-screen flex items-center justify-center bg-black text-gold font-gothic animate-pulse"},_C={__name:"PlayerSheet",setup(t){const n=W_().params.id,s=Tt(null),i=Tt({ativo:!1});Do(()=>{rf(n,o=>{s.value=o}),lf(o=>{i.value=o})});const r=Ye(()=>{const o=s.value?.status||[];return o.includes("frenesi")?"shadow-[inset_0_0_100px_rgba(180,0,0,0.6)] animate-pulse":o.includes("veneno")?"shadow-[inset_0_0_100px_rgba(0,100,0,0.5)]":o.includes("medo")?"grayscale brightness-[0.4] contrast-150":""});return(o,l)=>(le(),fe("div",null,[s.value?(le(),fe(Ae,{key:0},[s.value.esperando?(le(),fe("div",oC,[D("h2",lC,"Ol, "+We(s.value.nome),1),l[0]||(l[0]=D("div",{class:"w-12 h-12 border-t-2 border-blood rounded-full animate-spin mx-auto mb-6"},null,-1)),l[1]||(l[1]=D("p",{class:"text-gray-400 font-serif italic text-lg"},'"Aguardando o Mestre..."',-1))])):(le(),fe("div",{key:1,class:Rt(["min-h-screen transition-opacity duration-1000 pb-24",r.value])},[D("div",aC,[D("h1",cC,We(s.value.nome),1)]),D("div",uC,[D("div",hC,[D("div",fC,[l[2]||(l[2]=D("span",null,"Vitalidade",-1)),D("span",null,We(s.value.hp_atual)+" / "+We(s.value.hp_max),1)]),D("div",dC,[D("div",{class:"h-full bg-gradient-to-r from-blood-dark via-blood to-blood-light transition-all duration-700 ease-out shadow-[0_0_20px_rgba(138,11,11,0.8)] relative",style:Bi({width:s.value.hp_atual/s.value.hp_max*100+"%"})},null,4)])])])],2))],64)):(le(),fe("div",pC," Conectando ao Sonho... ")),Me(rC,{combatState:i.value,myId:qt(n)},null,8,["combatState","myId"])]))}},gC={class:"min-h-screen bg-yharnam-dark text-gray-300 p-6"},mC={class:"flex justify-between items-center mb-8 border-b border-gray-700 pb-4"},yC={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},vC={class:"lg:col-span-1 bg-yharnam-paper border border-yharnam-border rounded p-4 h-fit"},bC={key:0,class:"space-y-4"},CC=["onUpdate:modelValue"],EC=["onUpdate:modelValue"],wC={key:0,class:"flex gap-2 items-center mb-1"},SC={class:"w-full text-blue-300"},IC=["onUpdate:modelValue"],TC={key:1},xC={class:"space-y-1"},RC={class:"font-mono text-sm text-gray-400"},AC={class:"lg:col-span-2"},NC={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},PC={class:"bg-black/50 p-3 border-b border-gray-700 flex justify-between items-center"},OC={class:"text-lg font-bold text-gold font-gothic"},DC={key:0,class:"text-xs bg-yellow-600 text-black px-2 py-0.5 rounded-full"},kC={key:0,class:"p-4"},MC={class:"flex flex-col gap-2"},LC=["onClick"],FC=["onClick"],BC=["onClick"],HC={key:1,class:"p-4 space-y-4"},UC={class:"flex justify-between text-xs uppercase text-gray-500"},WC=["onClick"],VC=["max","value","onInput"],jC={__name:"MasterDashboard",setup(t){const e=Tt({}),n=Tt({ativo:!1,ordem:[],turnoAtual:0}),s=Tt([]),i=Tt({}),r={cacador_machado:{esperando:!1,hp_max:24,hp_atual:24,frascos:5,balas:5,status:[],equipamentos:[{nome:"Machado de Caador",dano:"1d8+2"}]},cacador_cutelo:{esperando:!1,hp_max:20,hp_atual:20,frascos:5,balas:5,status:[],equipamentos:[{nome:"Cutelo Cerrado",dano:"1d6+3"}]},cacador_bengala:{esperando:!1,hp_max:18,hp_atual:18,frascos:5,balas:8,status:[],equipamentos:[{nome:"Bengala Enroscada",dano:"1d6+2"}]}};Do(()=>{Yb(f=>{e.value=f}),lf(f=>{n.value=f})}),hs(()=>n.value.ativo,f=>{f||(i.value={},s.value=[])});const o=(f,p)=>{Dr(f,r[p])},l=f=>{Dr(f,{esperando:!0})},a=()=>{s.value.push({id:`monstro_${Date.now()}`,nome:`Monstro ${s.value.length+1}`,iniciativa:10,tipo:"monstro"})},c=()=>{const f=[...s.value];for(const p in e.value)e.value[p].esperando||f.push({id:p,nome:e.value[p].nome,iniciativa:parseInt(i.value[p])||0,tipo:"jogador"});f.sort((p,m)=>m.iniciativa-p.iniciativa),kr({ativo:!0,ordem:f,turnoAtual:0})},u=()=>{let f=n.value.turnoAtual+1;f>=n.value.ordem.length&&(f=0),kr({...n.value,turnoAtual:f})},h=()=>{kr({ativo:!1,ordem:[],turnoAtual:0})};return(f,p)=>{const m=Xc("router-link");return le(),fe("div",gC,[D("div",mC,[p[1]||(p[1]=D("h1",{class:"text-3xl text-gold font-gothic"},"Painel do Mestre",-1)),Me(m,{to:"/",class:"text-sm text-gray-500 hover:text-white"},{default:$c(()=>[...p[0]||(p[0]=[yu("Sair",-1)])]),_:1})]),D("div",yC,[D("div",vC,[p[4]||(p[4]=D("h2",{class:"text-2xl font-gothic text-blood mb-4"},"Controle de Combate",-1)),n.value.ativo?(le(),fe("div",TC,[D("div",{class:"flex justify-between items-center mb-4"},[D("button",{onClick:u,class:"bg-gold hover:bg-gold-dim text-black font-gothic py-2 px-6 rounded"},"Prximo"),D("button",{onClick:h,class:"text-xs text-gray-500 hover:text-blood"},"Encerrar Combate")]),D("div",xC,[(le(!0),fe(Ae,null,os(n.value.ordem,(y,R)=>(le(),fe("div",{key:y.id,class:Rt(["p-2 rounded flex justify-between items-center",R===n.value.turnoAtual?"bg-gold/20":""])},[D("span",{class:Rt(["font-gothic text-lg",y.tipo==="jogador"?"text-blue-300":"text-red-400"])},We(y.nome),3),D("span",RC,We(y.iniciativa),1)],2))),128))])])):(le(),fe("div",bC,[D("div",null,[p[2]||(p[2]=D("h3",{class:"text-sm uppercase tracking-widest text-gray-500 mb-2"},"1. Adicionar Monstros",-1)),(le(!0),fe(Ae,null,os(s.value,(y,R)=>(le(),fe("div",{key:y.id,class:"flex gap-2 items-center mb-1"},[ti(D("input",{"onUpdate:modelValue":x=>y.nome=x,placeholder:"Nome",class:"bg-black/50 border-b border-gray-700 p-1 rounded w-full text-sm"},null,8,CC),[[ri,y.nome]]),ti(D("input",{"onUpdate:modelValue":x=>y.iniciativa=x,type:"number",placeholder:"Ini",class:"bg-black/50 border-b border-gray-700 p-1 rounded w-20 text-sm"},null,8,EC),[[ri,y.iniciativa,void 0,{number:!0}]])]))),128)),D("button",{onClick:a,class:"text-xs bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded mt-1 w-full"},"+ Monstro")]),D("div",null,[p[3]||(p[3]=D("h3",{class:"text-sm uppercase tracking-widest text-gray-500 mb-2"},"2. Iniciativa dos Jogadores",-1)),(le(!0),fe(Ae,null,os(e.value,(y,R)=>(le(),fe("div",{key:R},[y.esperando?$r("",!0):(le(),fe("div",wC,[D("label",SC,We(y.nome),1),ti(D("input",{"onUpdate:modelValue":x=>i.value[R]=x,type:"number",placeholder:"Ini",class:"bg-black/50 border-b border-gray-700 p-1 rounded w-20 text-sm text-center"},null,8,IC),[[ri,i.value[R],void 0,{number:!0}]])]))]))),128))]),D("button",{onClick:c,class:"w-full bg-blood hover:bg-red-700 text-white font-gothic py-3 mt-4 text-lg uppercase tracking-widest rounded"}," INICIAR COMBATE ")]))]),D("div",AC,[p[6]||(p[6]=D("h2",{class:"text-2xl font-gothic text-gold mb-4"},"Jogadores na Sesso",-1)),D("div",NC,[(le(!0),fe(Ae,null,os(e.value,(y,R)=>(le(),fe("div",{key:R,class:"bg-yharnam-paper border border-gray-700 rounded shadow-lg"},[D("div",PC,[D("h3",OC,We(y.nome),1),y.esperando?(le(),fe("span",DC,"Aguardando Ficha")):$r("",!0)]),y.esperando?(le(),fe("div",kC,[p[5]||(p[5]=D("p",{class:"text-xs text-yellow-500 mb-2"},"Atribuir Ficha:",-1)),D("div",MC,[D("button",{onClick:x=>o(R,"cacador_machado"),class:"bg-gray-800 hover:bg-gray-700 text-sm py-2 px-3 rounded text-left"}," Machado",8,LC),D("button",{onClick:x=>o(R,"cacador_cutelo"),class:"bg-gray-800 hover:bg-gray-700 text-sm py-2 px-3 rounded text-left"}," Cutelo",8,FC),D("button",{onClick:x=>o(R,"cacador_bengala"),class:"bg-gray-800 hover:bg-gray-700 text-sm py-2 px-3 rounded text-left"}," Bengala",8,BC)])])):(le(),fe("div",HC,[D("div",UC,[D("span",null,"Vida: "+We(y.hp_atual)+" / "+We(y.hp_max),1),D("button",{onClick:x=>l(R),class:"hover:text-red-500"},"Resetar Ficha",8,WC)]),D("input",{type:"range",min:"0",max:y.hp_max,value:y.hp_atual,onInput:x=>qt(Dr)(R,{hp_atual:parseInt(x.target.value)}),class:"w-full h-2 bg-gray-800 rounded-lg appearance-none cursor-pointer accent-blood"},null,40,VC)]))]))),128))])])])])}}},$C=[{path:"/",component:nC},{path:"/player/:id",component:_C,props:!0},{path:"/mestre",component:jC}],GC=H_({history:m_(),routes:$C});Tp(Op).use(GC).mount("#app");
